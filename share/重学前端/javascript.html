<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript | 王思杰的前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="分享日常总结，工具框架的使用以及整理">
    <meta http-equiv="cache-control" content="no-cache">
    
    <link rel="preload" href="/assets/css/0.styles.7352d3e5.css" as="style"><link rel="preload" href="/assets/js/app.b10b90d4.js" as="script"><link rel="preload" href="/assets/js/2.aba2ec75.js" as="script"><link rel="preload" href="/assets/js/104.ac189813.js" as="script"><link rel="preload" href="/assets/js/3.a992b9fe.js" as="script"><link rel="prefetch" href="/assets/js/10.91bf469c.js"><link rel="prefetch" href="/assets/js/100.cff3a47e.js"><link rel="prefetch" href="/assets/js/101.100801aa.js"><link rel="prefetch" href="/assets/js/102.c6dc08b2.js"><link rel="prefetch" href="/assets/js/103.6c050768.js"><link rel="prefetch" href="/assets/js/105.8a76ca38.js"><link rel="prefetch" href="/assets/js/106.86d28331.js"><link rel="prefetch" href="/assets/js/107.e7eb1e6f.js"><link rel="prefetch" href="/assets/js/108.bbbac73a.js"><link rel="prefetch" href="/assets/js/109.7486ed5d.js"><link rel="prefetch" href="/assets/js/11.1f8bf62f.js"><link rel="prefetch" href="/assets/js/110.e7efee71.js"><link rel="prefetch" href="/assets/js/111.a5f5e39f.js"><link rel="prefetch" href="/assets/js/112.320c80f2.js"><link rel="prefetch" href="/assets/js/113.051bcab9.js"><link rel="prefetch" href="/assets/js/114.4cae358f.js"><link rel="prefetch" href="/assets/js/115.8d5a68e5.js"><link rel="prefetch" href="/assets/js/116.92c1b1c1.js"><link rel="prefetch" href="/assets/js/12.2c1e75e2.js"><link rel="prefetch" href="/assets/js/13.659a494d.js"><link rel="prefetch" href="/assets/js/14.e72fb477.js"><link rel="prefetch" href="/assets/js/15.f84f7b47.js"><link rel="prefetch" href="/assets/js/16.d398ce74.js"><link rel="prefetch" href="/assets/js/17.77fab2ad.js"><link rel="prefetch" href="/assets/js/18.14b96c75.js"><link rel="prefetch" href="/assets/js/19.bc97bf97.js"><link rel="prefetch" href="/assets/js/20.5f0e92f6.js"><link rel="prefetch" href="/assets/js/21.68c35422.js"><link rel="prefetch" href="/assets/js/22.b107e40e.js"><link rel="prefetch" href="/assets/js/23.23008d90.js"><link rel="prefetch" href="/assets/js/24.40f731dd.js"><link rel="prefetch" href="/assets/js/25.aaead0e9.js"><link rel="prefetch" href="/assets/js/26.1253f6b0.js"><link rel="prefetch" href="/assets/js/27.13803d3f.js"><link rel="prefetch" href="/assets/js/28.2249e21c.js"><link rel="prefetch" href="/assets/js/29.f495570c.js"><link rel="prefetch" href="/assets/js/30.a0fb088b.js"><link rel="prefetch" href="/assets/js/31.7c3476ae.js"><link rel="prefetch" href="/assets/js/32.2691283d.js"><link rel="prefetch" href="/assets/js/33.adbffdbd.js"><link rel="prefetch" href="/assets/js/34.1e39158e.js"><link rel="prefetch" href="/assets/js/35.edfc3d3e.js"><link rel="prefetch" href="/assets/js/36.80669852.js"><link rel="prefetch" href="/assets/js/37.ece2b30d.js"><link rel="prefetch" href="/assets/js/38.c645f28e.js"><link rel="prefetch" href="/assets/js/39.8f8a1b8c.js"><link rel="prefetch" href="/assets/js/4.45d09f32.js"><link rel="prefetch" href="/assets/js/40.d423e0d6.js"><link rel="prefetch" href="/assets/js/41.ace646da.js"><link rel="prefetch" href="/assets/js/42.d14b4120.js"><link rel="prefetch" href="/assets/js/43.d0b9ff26.js"><link rel="prefetch" href="/assets/js/44.5024b2e5.js"><link rel="prefetch" href="/assets/js/45.6a82c535.js"><link rel="prefetch" href="/assets/js/46.779ea6cb.js"><link rel="prefetch" href="/assets/js/47.5f7f05b0.js"><link rel="prefetch" href="/assets/js/48.a0acf725.js"><link rel="prefetch" href="/assets/js/49.b5c33505.js"><link rel="prefetch" href="/assets/js/5.f3c9e357.js"><link rel="prefetch" href="/assets/js/50.2931e2ab.js"><link rel="prefetch" href="/assets/js/51.0f5070d6.js"><link rel="prefetch" href="/assets/js/52.e69b14d5.js"><link rel="prefetch" href="/assets/js/53.a4e727ca.js"><link rel="prefetch" href="/assets/js/54.3993d045.js"><link rel="prefetch" href="/assets/js/55.215c51d5.js"><link rel="prefetch" href="/assets/js/56.6a8bb769.js"><link rel="prefetch" href="/assets/js/57.06b1273c.js"><link rel="prefetch" href="/assets/js/58.5edb4108.js"><link rel="prefetch" href="/assets/js/59.0d4aa606.js"><link rel="prefetch" href="/assets/js/6.a6c6c2e5.js"><link rel="prefetch" href="/assets/js/60.b94ee0d3.js"><link rel="prefetch" href="/assets/js/61.9536da47.js"><link rel="prefetch" href="/assets/js/62.d16d98c7.js"><link rel="prefetch" href="/assets/js/63.d7f18967.js"><link rel="prefetch" href="/assets/js/64.04912a97.js"><link rel="prefetch" href="/assets/js/65.c469e7ff.js"><link rel="prefetch" href="/assets/js/66.d912c1c1.js"><link rel="prefetch" href="/assets/js/67.e662faf6.js"><link rel="prefetch" href="/assets/js/68.584676ee.js"><link rel="prefetch" href="/assets/js/69.f9d1023f.js"><link rel="prefetch" href="/assets/js/7.937a30f1.js"><link rel="prefetch" href="/assets/js/70.892b87dd.js"><link rel="prefetch" href="/assets/js/71.32cd024e.js"><link rel="prefetch" href="/assets/js/72.b092d8d6.js"><link rel="prefetch" href="/assets/js/73.25c1d80f.js"><link rel="prefetch" href="/assets/js/74.8f9268df.js"><link rel="prefetch" href="/assets/js/75.62cf6721.js"><link rel="prefetch" href="/assets/js/76.e320ecf7.js"><link rel="prefetch" href="/assets/js/77.ad68baed.js"><link rel="prefetch" href="/assets/js/78.d8bff19d.js"><link rel="prefetch" href="/assets/js/79.e8522410.js"><link rel="prefetch" href="/assets/js/8.89804910.js"><link rel="prefetch" href="/assets/js/80.0abc5f87.js"><link rel="prefetch" href="/assets/js/81.dfe2cad8.js"><link rel="prefetch" href="/assets/js/82.305b6f50.js"><link rel="prefetch" href="/assets/js/83.98f0cdfc.js"><link rel="prefetch" href="/assets/js/84.4b1ac88e.js"><link rel="prefetch" href="/assets/js/85.f7567b7b.js"><link rel="prefetch" href="/assets/js/86.637ea658.js"><link rel="prefetch" href="/assets/js/87.ad0859f7.js"><link rel="prefetch" href="/assets/js/88.188b07fc.js"><link rel="prefetch" href="/assets/js/89.32a5f1a9.js"><link rel="prefetch" href="/assets/js/9.0cd8aeb4.js"><link rel="prefetch" href="/assets/js/90.03321550.js"><link rel="prefetch" href="/assets/js/91.9355456d.js"><link rel="prefetch" href="/assets/js/92.56996d3b.js"><link rel="prefetch" href="/assets/js/93.8741417d.js"><link rel="prefetch" href="/assets/js/94.61193ccb.js"><link rel="prefetch" href="/assets/js/95.f8bc9781.js"><link rel="prefetch" href="/assets/js/96.550ed2bd.js"><link rel="prefetch" href="/assets/js/97.781c9b6b.js"><link rel="prefetch" href="/assets/js/98.3865a259.js"><link rel="prefetch" href="/assets/js/99.ea1633c6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7352d3e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">王思杰的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">
  日常笔记
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  前端进阶
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/services/" class="nav-link">
  服务器
</a></div><div class="nav-item"><a href="/computerbasic/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/share/" class="nav-link router-link-active">
  杂乱/分享
</a></div><div class="nav-item"><a href="https://github.com/simonwong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">
  日常笔记
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  前端进阶
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/services/" class="nav-link">
  服务器
</a></div><div class="nav-item"><a href="/computerbasic/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/share/" class="nav-link router-link-active">
  杂乱/分享
</a></div><div class="nav-item"><a href="https://github.com/simonwong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/share/" aria-current="page" class="sidebar-link">杂乱/分享</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>重学前端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/share/%E9%87%8D%E5%AD%A6%E5%89%8D%E7%AB%AF/" aria-current="page" class="sidebar-link">整理知识结构</a></li><li><a href="/share/重学前端/html.html" class="sidebar-link">HTML</a></li><li><a href="/share/重学前端/css.html" class="sidebar-link">CSS</a></li><li><a href="/share/重学前端/javascript.html" class="active sidebar-link">JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/share/重学前端/javascript.html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/share/重学前端/javascript.html#对象" class="sidebar-link">对象</a></li><li class="sidebar-sub-header"><a href="/share/重学前端/javascript.html#类与原型" class="sidebar-link">类与原型</a></li><li class="sidebar-sub-header"><a href="/share/重学前端/javascript.html#对象的分类" class="sidebar-link">对象的分类</a></li><li class="sidebar-sub-header"><a href="/share/重学前端/javascript.html#javascript-的执行" class="sidebar-link">JavaScript 的执行</a></li><li class="sidebar-sub-header"><a href="/share/重学前端/javascript.html#词法" class="sidebar-link">词法</a></li><li class="sidebar-sub-header"><a href="/share/重学前端/javascript.html#语法" class="sidebar-link">语法</a></li></ul></li><li><a href="/share/重学前端/browser.html" class="sidebar-link">浏览器是如何工作的</a></li><li><a href="/share/重学前端/engineering-practice.html" class="sidebar-link">工程实践</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器工作原理与实践</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/share/TypeScript、Rollup搭建工具库.html" class="sidebar-link">TypeScript、Rollup 搭建工具库</a></li><li><a href="/share/从webpack打包看前端模块化.html" class="sidebar-link">从 webpack 打包看前端模块化</a></li><li><a href="/share/ReactFiber架构浅析.html" class="sidebar-link">React Fiber 架构 #</a></li><li><a href="/share/React性能优化方案.html" class="sidebar-link">React性能优化 #</a></li><li><a href="/share/TCP协议.html" class="sidebar-link">TCP协议 #</a></li><li><a href="/share/函数式编程之柯里化.html" class="sidebar-link">函数式编程之柯里化 #</a></li><li><a href="/share/多版本包依赖问题探讨.html" class="sidebar-link">npm多版本包依赖问题探讨</a></li><li><a href="/share/常见的函数组合.html" class="sidebar-link">常见的函数组合</a></li><li><a href="/share/算法分享递归到树到动态规划.html" class="sidebar-link">算法分享</a></li><li><a href="/share/纯函数.html" class="sidebar-link">纯函数 #</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h1> <h2 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h2> <blockquote><p>Undefined、Null、Boolean、String、Number、Symbol、Object</p></blockquote> <h3 id="undefined、null"><a href="#undefined、null" class="header-anchor">#</a> undefined、null</h3> <p>undefined是一个变量。并非关键字。建议使用void 0类获取undfined值。</p> <p>null是关键字：“定义了但是为空”</p> <h3 id="boolean"><a href="#boolean" class="header-anchor">#</a> Boolean</h3> <p><code>true</code> <code>false</code></p> <h3 id="string"><a href="#string" class="header-anchor">#</a> String</h3> <p>字符串的最大长度是2^53-1</p> <p>字符串是<code>UTF-16</code>编码，常用的<code>chartAt</code> <code>charCodeAt</code> <code>length</code>都是针对的UTF-16编码</p> <blockquote><p>0-65536（U+0000 - U+FFFF）的码点被称为基本字符区域（BMP）</p></blockquote> <p>处理非BMP的字符，要小心。如<code>喆</code></p> <h3 id="number"><a href="#number" class="header-anchor">#</a> Number</h3> <p>有18437736874454810627(即 2^64-2^53+3) 个值</p> <ul><li>NaN，占用了9007199254740990</li> <li>Infinity，无穷大</li> <li>-Infinity，负无穷大</li></ul> <p><code>0.1 + 0.2 == 0.3</code>的比较方法<code>Math.abs(0.1 + 0.2 - 0.3) &lt;= Number.EPSILON</code></p> <h3 id="symbol"><a href="#symbol" class="header-anchor">#</a> Symbol</h3> <p>是一切非字符串的对象 key 的集合</p> <h3 id="object"><a href="#object" class="header-anchor">#</a> Object</h3> <p>是一切有形和无形物体的总称。</p> <p>是“属性的集合” key-value</p> <p>基本类型和他们的对象类型：</p> <p>Number、String、Boolean、Symbol</p> <p>3 与 <code>new Number(3)</code>是完全不同的值。一个是Number类型，一个是对象类型。</p> <p>前三个构造器是两用的。跟<code>new</code>搭配，产生对象，直接调用表示强制类型转换</p> <h3 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h3> <p><img src="http://file.wangsijie.top/share/chongxuefe/2019-02-1871bafbd2404dc3ffa5ccf5d0ba077720.jpg" alt=""></p> <h3 id="stringtonumber"><a href="#stringtonumber" class="header-anchor">#</a> StringToNumber</h3> <p><code>parseInt</code>建议都穿入第二个参数</p> <p><code>parseFloat</code>直接吧原字符串作为十进制来解析</p> <p>Number是比上面俩个更好的选择</p> <h3 id="numbertostring"><a href="#numbertostring" class="header-anchor">#</a> NumberToString</h3> <p>基本是符合直觉的十进制转换</p> <h3 id="装箱转换"><a href="#装箱转换" class="header-anchor">#</a> 装箱转换</h3> <blockquote><p>把基本类型转换为对应的对象</p></blockquote> <p><code>Object(Symbol('a')) //=&gt; Symbol {Symbol(a)}description: &quot;a&quot;__proto__: Symbol[[PrimitiveValue]]: Symbol(a)</code></p> <p><code>Object.prototype.toString.call</code>可以准确识别对象的基本类型。</p> <p>但是call本身会进行装箱操作，所以要typeof区分是基本类型，还是对象类型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token number">1</span> <span class="token comment">// =&gt; &quot;Number&quot;</span>
<span class="token keyword">typeof</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Object&quot;</span>

<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;[object Number]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Object</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;[object Number]&quot;</span>
</code></pre></div><h3 id="拆箱转换"><a href="#拆箱转换" class="header-anchor">#</a> 拆箱转换</h3> <blockquote><p>把对象类型转换为基本类型</p> <p>遵循“先拆箱再转换”</p></blockquote> <blockquote><p>拆箱转换会尝试调用<code>valueOf</code> <code>toString</code>，如果都不存在，或者没有返回基本类型，就会抛出<code>TypeError</code></p></blockquote> <p>当做一些类型强制转换时，会进行拆箱转换。会有不同的顺序</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>obj <span class="token operator">*</span> <span class="token number">2</span> <span class="token comment">// =&gt; valueOf --&gt; toString --&gt; TypeError</span>
obj <span class="token operator">+</span> <span class="token string">''</span> <span class="token comment">// =&gt; toString --&gt; valueOf --&gt; TypeError</span>
</code></pre></div><h3 id="规范类型"><a href="#规范类型" class="header-anchor">#</a> 规范类型</h3> <p>除了七种语言类型，还有规范类型</p> <ul><li>List 和 Record：用于描述函数传参过程</li> <li>Set：主要用于结束字符集等</li> <li>Completion Record：用于描述异常、跳出等语句执行过程</li> <li>Reference：用于描述对象属性访问、delete等</li> <li>Lexical Environment 和 Environment Record：用于描述变量和作用域</li> <li>Data Block：用于描述二进制数据</li></ul> <h2 id="对象"><a href="#对象" class="header-anchor">#</a> 对象</h2> <p>对象的特点</p> <ul><li>对象具有唯一标识性：具有唯一标识的内存地址</li> <li>对象有状态：同一对象处于不同的状态</li> <li>对象具有行为：对象的状态可能因为他的行为产生变迁</li></ul> <blockquote><p>对象独有的特色：<strong>对象具有高度的动态性，这是因为 JavaScript 赋予了使用者在运行时为对象添改状态和行为的能力</strong></p></blockquote> <h2 id="类与原型"><a href="#类与原型" class="header-anchor">#</a> 类与原型</h2> <blockquote><p>基于类的编程语言 C++ 、 Java 等</p> <p>基于原型 JavaScript 等</p></blockquote> <p>原型系统的“复制操作”思路：</p> <ul><li>新对象持有一个原型的引用：JavaScript</li> <li>切实地复制对象，且无关联</li></ul> <h3 id="javascript的原型"><a href="#javascript的原型" class="header-anchor">#</a> JavaScript的原型</h3> <blockquote><p>如果所有对象都有私有字段 [[prototype]] ，就是对象的原型</p> <p>读取一个属性，如果对象本身没有，就会继续访问对象的原型，知道原型为空或找到</p></blockquote> <p>ES6 访问操作原型</p> <ul><li><code>Object.create</code> 根据指定的原型创建新对象，原型可以是 null</li> <li><code>Object.getPrototypeOf</code> 获得一个对象的原型</li> <li><code>Object.setPrototypeOf</code> 设置一个对象的原型</li></ul> <h3 id="早期的原型和类"><a href="#早期的原型和类" class="header-anchor">#</a> 早期的原型和类</h3> <p>模拟类</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">function</span> <span class="token function">c1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>p1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">p2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
<span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">c1</span><span class="token punctuation">;</span>
o1<span class="token punctuation">.</span><span class="token function">p2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这种方式的p1、p2属性将被暴露在o1中</span>


<span class="token keyword">function</span> <span class="token function">c2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
c2<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>p1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
c2<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">p2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">c2</span><span class="token punctuation">;</span>
o2<span class="token punctuation">.</span><span class="token function">p2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这种方式的p1、p2属性不会暴露</span>
</code></pre></div><h3 id="es6中的类"><a href="#es6中的类" class="header-anchor">#</a> ES6中的类</h3> <h2 id="对象的分类"><a href="#对象的分类" class="header-anchor">#</a> 对象的分类</h2> <ul><li>宿主对象</li> <li>内置对象
<ul><li>固有对象</li> <li>原生对象</li> <li>普通对象</li></ul></li></ul> <h3 id="宿主对象"><a href="#宿主对象" class="header-anchor">#</a> 宿主对象</h3> <p>比如浏览器环境中的宿主。</p> <p>window上的属性一部分来自 JavaScript 语言，一部分来自浏览器。</p> <p>又分为固有的和用户创建的。<code>document.createElement</code> 可以创建一些 dom 对象。</p> <p>还会提供一些构造器，比如 <code>new Image</code></p> <h3 id="内置对象·固有对象"><a href="#内置对象·固有对象" class="header-anchor">#</a> 内置对象·固有对象</h3> <p>由标准规定，随着 JavaScript 运行时创建而自动创建的实例</p> <h3 id="内置对象·原生对象"><a href="#内置对象·原生对象" class="header-anchor">#</a> 内置对象·原生对象</h3> <p><img src="http://file.wangsijie.top/share/chongxuefe/07f7826ffeb895e2e8a59dd186cf7758.png" alt=""></p> <blockquote><p>几乎所有这些构造器的能力都是无法用纯js代码实现的，也无法用 class/extend 继承</p></blockquote> <h3 id="内置对象·普通对象"><a href="#内置对象·普通对象" class="header-anchor">#</a> 内置对象·普通对象</h3> <h3 id="用对象来模拟函数与构造器-函数对象和构造器对象"><a href="#用对象来模拟函数与构造器-函数对象和构造器对象" class="header-anchor">#</a> 用对象来模拟函数与构造器：函数对象和构造器对象</h3> <blockquote><p>函数对象：具有 [[call]] 私有字段的对象</p> <p>构造器对象：具有 [[construct]] 的对象</p></blockquote> <h2 id="javascript-的执行"><a href="#javascript-的执行" class="header-anchor">#</a> JavaScript 的执行</h2> <h3 id="事件循环-宏观任务与微观任务"><a href="#事件循环-宏观任务与微观任务" class="header-anchor">#</a> 事件循环 - 宏观任务与微观任务</h3> <p>宏观任务：由宿主发起的</p> <p>微观任务：由 JS 引擎发起的</p> <blockquote><p>JavaScript 引擎等待宿主环境分配宏观任务，通常等待的行为都是一个事件循环</p> <p>整个循环做的事情基本就是反复“等待 - 执行”</p></blockquote> <p>每次执行过程，其实就是一个宏观任务，所以<strong>宏观任务的列队</strong>就相当于事件循环</p> <p>宏观任务中，Promise 也会产生异步代码，JS需要保证这些异步代码在一个宏观任务中执行。</p> <p>每个宏观任务又包含一个微观任务列队</p> <h3 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h3> <p><img src="http://file.wangsijie.top/share/chongxuefe/68f50c00d475a7d6d8c7eef6a91b2152.png" alt=""></p> <blockquote><p>其实只是一个绑定了<strong>执行环境</strong>的函数</p></blockquote> <ul><li>环境部分
<ul><li>环境：函数的词法环境（执行上下文的一部分）</li> <li>标识符列表：函数中用到的未申明变量</li></ul></li> <li>表达式部分：函数体</li></ul> <h3 id="执行上下文-执行的基础设施"><a href="#执行上下文-执行的基础设施" class="header-anchor">#</a> 执行上下文：执行的基础设施</h3> <ul><li>Lexical environment：词法环境，当获取变量或者 this 值时使用</li> <li>variable environment：变量环境，当申明变量时使用</li> <li>code evalution state：用于恢复代码执行位置</li> <li>Function：执行的任务是函数时使用，表示正在被执行的函数</li> <li>ScriptOrMoudle：执行的任务是脚本或模板时使用，表示正在执行的代码</li> <li>Realm：使用的基础库和内置对象实例</li> <li>Generator：仅生成器上下文有这个属性，表示当前生成器</li></ul> <h3 id="this"><a href="#this" class="header-anchor">#</a> this</h3> <blockquote><p>普通函数的 this 值由“调用它所使用的引用”所决定</p></blockquote> <h3 id="completion-类型"><a href="#completion-类型" class="header-anchor">#</a> Completion 类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// a</span>
<span class="token comment">// 0</span>
</code></pre></div><p>Completion Record 用于描述异常、跳出等语句执行过程，表示一个语句执行完之后的结果</p> <ul><li>[[type]] 表示完成的类型，有 break continue return throw normal 几种</li> <li>[[value]] 表示语句的返回值，如果语句没有，则是 empty</li> <li>[[target]] 表示语句的目标，通常是一个 JavaScript 标签</li></ul> <p><img src="http://file.wangsijie.top/share/chongxuefe/98ce53be306344c018cddd6c083392d5.jpg" alt=""></p> <p><img src="http://file.wangsijie.top/share/chongxuefe/7760027d7ee09bdc8ec140efa9caf1d3.png" alt=""></p> <ul><li>穿透：穿过当前这一层，到外面那一层，向外逐层寻找可以“消费”的那一层</li> <li>消费：这一层就处理了</li></ul> <h2 id="词法"><a href="#词法" class="header-anchor">#</a> 词法</h2> <h3 id="whitespace-空白字符"><a href="#whitespace-空白字符" class="header-anchor">#</a> WhiteSpace 空白字符</h3> <p>js 支持所有的 Unicode 中的空格分类下的空格</p> <h3 id="lineterminator-换行符"><a href="#lineterminator-换行符" class="header-anchor">#</a> LineTerminator 换行符</h3> <p>换行符回影响 js 的两个重要语法特性：自动插入分号和” no line terminator “规则</p> <h3 id="comment-注释"><a href="#comment-注释" class="header-anchor">#</a> Comment 注释</h3> <h3 id="token-词"><a href="#token-词" class="header-anchor">#</a> Token 词</h3> <ul><li><p>IndentifierName 标识符名称，变量名</p></li> <li><p>Punctuator 符号，运算符和大括号等</p> <div class="language- extra-class"><pre class="language-text"><code>{ ( ) [ ] . ... ; , &lt; &gt; &lt;= &gt;= == != === !== + - * % ** ++ -- &lt;&lt; &gt;&gt; &gt;&gt;&gt; &amp; | ^ ! ~ &amp;&amp; || ? : = += -= *= %= **= &lt;&lt;= &gt;&gt;= &gt;&gt;&gt;= &amp;= |= ^= =&gt; / /= }
</code></pre></div></li> <li><p>NumericLiteral 数字直接量，数字</p> <p><code>12.toString()</code> 12. 会被当作数字的一部分，所以会报错，可以加个空格，让点成为单独的token <code>12 .toString()</code></p></li> <li><p>StringLiteral 字符串直接量，单双引号引起来的直接量</p></li> <li><p>RegularExpressionLiteral 正则表达式直接量</p></li> <li><p>Template 字符串模板</p></li></ul> <h2 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h2> <h3 id="分号"><a href="#分号" class="header-anchor">#</a> 分号</h3> <p>自动插入分号规则：</p> <ul><li>有换行符，且下一个符号是不符合语法的，那么就尝试插入分号</li> <li>有换行符，且语法中规定地处不能有换行符（即 no LineTerminator here 规则），那么就自动插入分号</li> <li>源代码借书处，不能形成完成的脚本或者模块结构，那么就自动插入分号</li></ul> <p>no LineTerminator here ，不能插入换行的规则：</p> <ul><li>带标签的 continue  <code>continue /*no LineTerminator here*/ outter</code></li> <li>带标签的 break <code>break /*no LineTerminator here*/ outter</code></li> <li>return 后 <code>return /*no LineTerminator here*/1;</code></li> <li>后自增、后自减运算符前 <code>i/*no LineTerminator here*/++</code></li> <li>throw 和 Exception 之间 <code>throw/*no LineTerminator here*/new Exception(&quot;error&quot;)</code></li> <li>凡是 async 关键字 后面 <code>async/*no LineTerminator here*/x =&gt; x*x</code></li> <li>箭头函数的箭头前 <code>const f = x/*no LineTerminator here*/=&gt; x*x</code></li> <li>yield 之后 <code>yield/*no LineTerminator here*/i++;</code></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7 个月前</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/share/重学前端/css.html" class="prev">
        CSS
      </a></span> <span class="next"><a href="/share/重学前端/browser.html">
        浏览器是如何工作的
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.b10b90d4.js" defer></script><script src="/assets/js/2.aba2ec75.js" defer></script><script src="/assets/js/104.ac189813.js" defer></script><script src="/assets/js/3.a992b9fe.js" defer></script>
  </body>
</html>
