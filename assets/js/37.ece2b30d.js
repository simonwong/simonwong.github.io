(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{450:function(t,s,a){"use strict";a.r(s);var n=a(27),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"npm-基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-基础"}},[t._v("#")]),t._v(" npm 基础")]),t._v(" "),a("h2",{attrs:{id:"知识点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#知识点"}},[t._v("#")]),t._v(" 知识点")]),t._v(" "),a("h3",{attrs:{id:"几种依赖类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#几种依赖类型"}},[t._v("#")]),t._v(" 几种依赖类型")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("dependencies 项目依赖，会成为线上生产环境中的代码组成部分")])]),t._v(" "),a("li",[a("p",[t._v("devDependencies 开发依赖，辅助开发的工具包，无须在生产环境使用")])]),t._v(" "),a("li",[a("p",[t._v("peerDependencies 同版本依赖")])]),t._v(" "),a("li",[a("p",[t._v("bundledDependencies 捆绑依赖")])]),t._v(" "),a("li",[a("p",[t._v("optionalDependencies 可选依赖，不建议使用，它大概率会增加项目的不确定性和复杂性。")])])]),t._v(" "),a("p",[t._v("dependencies 、devDependencies 依赖是否被打包，完全取决于项目里是否被引入了该模块。")]),t._v(" "),a("p",[t._v("peerDependencies 的使用场景：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("插件不能单独运行")])]),t._v(" "),a("li",[a("p",[t._v("插件正确运行的前提是核心依赖库必须先下载安装")])]),t._v(" "),a("li",[a("p",[t._v("我们不希望核心依赖库被重复下载")])]),t._v(" "),a("li",[a("p",[t._v("插件 API 的设计必须要符合核心依赖库的插件编写规范")])]),t._v(" "),a("li",[a("p",[t._v("在项目中，同一插件体系下，核心依赖库版本最好相同")])])]),t._v(" "),a("h3",{attrs:{id:"脚本传入参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚本传入参数"}},[t._v("#")]),t._v(" 脚本传入参数")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serve"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-cli-service serve --mode=dev --mobile -config build/example.js"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("体现到 "),a("code",[t._v("process.env")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[ '/usr/local/Cellar/node/12.14.1/bin/node',\n  '/Users/mac/Vue-projects/hao-cli/node_modules/.bin/vue-cli-service',\n  'serve',\n  '--mode=dev',\n  '--mobile',\n  '-config',\n  'build/example.js']\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve --params  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参数params将转化成process.env.npm_config_params = true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve --params"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参数params将转化成process.env.npm_config_params = 123")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve -params  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等同于--params参数")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve -- --params  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将--params参数添加到process.env.argv数组中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve params  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将params参数添加到process.env.argv数组中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve -- params  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将params参数添加到process.env.argv数组中")]),t._v("\n")])])]),a("h3",{attrs:{id:"执行顺序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行顺序"}},[t._v("#")]),t._v(" 执行顺序")]),t._v(" "),a("ul",[a("li",[t._v("并行任务，使用 &")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run b\n")])])]),a("ul",[a("li",[t._v("串行任务，使用 &&")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm run a && npm run b\n")])])]),a("h3",{attrs:{id:"env-环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env-环境变量"}},[t._v("#")]),t._v(" env 环境变量")]),t._v(" "),a("p",[t._v("如果"),a("code",[t._v("env")]),t._v("环境变量中存在以"),a("code",[t._v("npm_config_")]),t._v("为前缀的环境变量，则会被识别为"),a("code",[t._v("npm")]),t._v("的配置属性。npm 会从环境变量读到这个配置")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("export npm_config_package_lock=false # 修改的是内存中的变量，只对当前终端有效\n")])])]),a("ul",[a("li",[t._v("查看某个环境变量："),a("code",[t._v("echo $NODE_ENV")])]),t._v(" "),a("li",[t._v("删除某个环境变量："),a("code",[t._v("unset NODE_ENV")])])]),t._v(" "),a("h3",{attrs:{id:"npmrc-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npmrc-文件"}},[t._v("#")]),t._v(" npmrc 文件")]),t._v(" "),a("p",[a("code",[t._v("npmrc")]),t._v(" 文件优先级由高到低包括：")]),t._v(" "),a("ul",[a("li",[t._v("工程内配置文件: "),a("code",[t._v("/path/to/my/project/.npmrc")])]),t._v(" "),a("li",[t._v("用户级配置文件: "),a("code",[t._v("~/.npmrc")])]),t._v(" "),a("li",[t._v("全局配置文件: "),a("code",[t._v("$PREFIX/etc/npmrc")]),t._v(" (即"),a("code",[t._v("npm config get globalconfig")]),t._v(" 输出的路径)")]),t._v(" "),a("li",[t._v("npm内置配置文件:"),a("code",[t._v("/path/to/npm/npmrc")])])]),t._v(" "),a("h2",{attrs:{id:"常见命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见命令"}},[t._v("#")]),t._v(" 常见命令")]),t._v(" "),a("p",[t._v("npm 文档 "),a("a",{attrs:{href:"https://docs.npmjs.com/cli/v6/commands",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm cli"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"常见命令-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见命令-2"}},[t._v("#")]),t._v(" 常见命令")]),t._v(" "),a("p",[a("code",[t._v("npm run env")]),t._v(" 列出所有环境变量")]),t._v(" "),a("h3",{attrs:{id:"npm-ci"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-ci"}},[t._v("#")]),t._v(" npm ci")]),t._v(" "),a("p",[t._v("CI 环境使用 npm ci 代替 npm install，一般会获得更加稳定、一致和迅速的安装体验。")]),t._v(" "),a("ul",[a("li",[t._v("npm ci 完全根据 package-lock.json 安装依赖，这可以保证整个开发团队都使用版本完全一致的依赖；")]),t._v(" "),a("li",[t._v("如果 package-lock.json 和 package.json 冲突，那么 npm ci 会直接报错，并非更新 lockfiles")]),t._v(" "),a("li",[t._v("npm ci 永远不会改变 package.json 和 package-lock.json")])]),t._v(" "),a("h3",{attrs:{id:"自定义-npm-init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义-npm-init"}},[t._v("#")]),t._v(" 自定义 npm init")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" desc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请输入项目描述'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目描述...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cwd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'version?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  description"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  main"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  repository"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'github repository url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'touch README.md'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git init'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git add README.md'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git commit -m \"first commit\"'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("git remote add origin ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git push -u origin master'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("执行 "),a("code",[t._v("npm config set init-module ~\\.npm-init.js")])])])}),[],!1,null,null,null);s.default=e.exports}}]);