(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{373:function(t,e,r){"use strict";r.r(e);var a=r(27),_=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"gitlab-work-flow"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-work-flow"}},[t._v("#")]),t._v(" Gitlab work flow")]),t._v(" "),r("h2",{attrs:{id:"功能驱动"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#功能驱动"}},[t._v("#")]),t._v(" 功能驱动")]),t._v(" "),r("p",[t._v("采用“"),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Feature-driven_development",target:"_blank",rel:"noopener noreferrer"}},[t._v("功能驱动式开发"),r("OutboundLink")],1),t._v("”(Feature-drien development)")]),t._v(" "),r("blockquote",[r("p",[t._v("它指的是，需求是开发的起点，先有需求再有功能分支（feature branch）或者补丁分支（hotfix branch）。完成开发后，该分支就合并到主分支，然后被删除。")])]),t._v(" "),r("h2",{attrs:{id:"gitlab-flow"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-flow"}},[t._v("#")]),t._v(" Gitlab flow")]),t._v(" "),r("blockquote",[r("p",[t._v("是 Git flow 与 Github flow 的综合。它吸取了两者的优点，既有适应不同开发环境的弹性，又有单一主分支的简单和便利。")])]),t._v(" "),r("h3",{attrs:{id:"上游优先原则"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#上游优先原则"}},[t._v("#")]),t._v(" 上游优先原则")]),t._v(" "),r("p",[t._v("即只存在一个主分支"),r("code",[t._v("master")]),t._v('，它是所有其他分支的"上游"。只有上游分支采纳的代码变化，才能应用到其他分支。')]),t._v(" "),r("h3",{attrs:{id:"持续发布"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#持续发布"}},[t._v("#")]),t._v(" 持续发布")]),t._v(" "),r("blockquote",[r("p",[t._v("考虑到项目一般是“持续发布“的，不像多数组件项目是”版本发布“，建议使用”持续发布“的策略")])]),t._v(" "),r("p",[t._v("建议在"),r("code",[t._v("master")]),t._v("主分支以外，再建立不同的环境分支。")]),t._v(" "),r("p",[t._v("项目中将长期存在的，”开发环境“的"),r("code",[t._v("master")]),t._v("主分支，”生产环境“的分支是"),r("code",[t._v("production")]),t._v("。后期增加测试后，可以在中间增加”预发环境“"),r("code",[t._v("pre-production")])]),t._v(" "),r("p",[r("img",{attrs:{src:"http://file.wangsijie.top/18-8-16/29456959.jpg",alt:""}})]),t._v(" "),r("p",[r("img",{attrs:{src:"http://file.wangsijie.top/18-8-16/53700696.jpg",alt:""}})]),t._v(" "),r("p",[t._v("如图")]),t._v(" "),r("p",[r("code",[t._v("master")]),t._v("开发分支是"),r("code",[t._v("pre-production")]),t._v("预发分支的”上游“，"),r("code",[t._v("pre-production")]),t._v("又是"),r("code",[t._v("production")]),t._v("的”上游“。必须由上游发展到下游。")]),t._v(" "),r("p",[r("code",[t._v("production")]),t._v("生产环境分支的代码始终跟线上同步。")]),t._v(" "),r("p",[t._v("因为git默认都是"),r("code",[t._v("master")]),t._v("分支，所以开发环境直接在"),r("code",[t._v("master")]),t._v("上将会很方便。")]),t._v(" "),r("p",[r("img",{attrs:{src:"http://file.wangsijie.top/18-8-17/35569759.jpg",alt:""}})]),t._v(" "),r("h3",{attrs:{id:"开发流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#开发流程"}},[t._v("#")]),t._v(" 开发流程")]),t._v(" "),r("blockquote",[r("ol",[r("li",[r("p",[r("code",[t._v("master")]),t._v("拉取并开一个分支，建议命名"),r("code",[t._v("feature-*")]),t._v(",可以随意带个后缀，并push到线上，这是一个暂存的分支。")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("feature-*")]),t._v("开发完成后"),r("code",[t._v("merge --no-ff")]),t._v("到"),r("code",[t._v("master")]),t._v("分支，并删除该分支。(另：合并到master的过程，\\建议增加"),r("code",[t._v("pull request")]),t._v(")")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("master")]),t._v("分支测试确认没有问题后，再进入到"),r("code",[t._v("pre-production")]),t._v(", 确认没问题后再进入"),r("code",[t._v("production")])])])])]),t._v(" "),r("h2",{attrs:{id:"注意事项"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),r("h3",{attrs:{id:"merge节点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#merge节点"}},[t._v("#")]),t._v(" Merge节点")]),t._v(" "),r("p",[t._v("Git有两种合并")]),t._v(" "),r("blockquote",[r("p",[r("code",[t._v("git merge [branch]")]),t._v(" 直进式合并，不生成合并节点。不利于保持commit信息的清晰，也不利于回滚")]),t._v(" "),r("p",[r("code",[t._v("git merge [branch] --no-ff")]),t._v("非直进式合并，会生成单独节点。强烈建议使用这一种！！！")])]),t._v(" "),r("p",[r("img",{attrs:{src:"http://file.wangsijie.top/18-8-17/53775524.jpg",alt:""}})]),t._v(" "),r("h3",{attrs:{id:"pull-request"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pull-request"}},[t._v("#")]),t._v(" pull request")]),t._v(" "),r("p",[t._v("feature分支合并到master分支，通过"),r("code",[t._v("pull request")]),t._v("，在这一步可以进行"),r("code",[t._v("code review")])]),t._v(" "),r("h3",{attrs:{id:"分支保护"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#分支保护"}},[t._v("#")]),t._v(" 分支保护")]),t._v(" "),r("p",[t._v("建议给长存的分支增加保护，除了管理员不能随意修改这些分支。也只有管理员可以审批"),r("code",[t._v("pull request")])]),t._v(" "),r("h2",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),r("blockquote",[r("p",[r("a",{attrs:{href:"https://docs.gitlab.com/ee/workflow/gitlab_flow.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Introduction to GitLab Flow"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2015/12/git-workflow.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git工作流程 - 阮一峰的网络日志"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=_.exports}}]);