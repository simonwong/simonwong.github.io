(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{448:function(a,s,t){"use strict";t.r(s);var n=t(27),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"yarn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[a._v("#")]),a._v(" yarn")]),a._v(" "),t("h2",{attrs:{id:"安装过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装过程"}},[a._v("#")]),a._v(" 安装过程")]),a._v(" "),t("p",[a._v("检测（checking）→ 解析包（Resolving Packages） → 获取包（Fetching Packages）→ 链接包（Linking Packages）→ 构建包（Building Packages）")]),a._v(" "),t("h3",{attrs:{id:"获取包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取包"}},[a._v("#")]),a._v(" 获取包")]),a._v(" "),t("p",[a._v("不过 Yarn 默认 prefer-online 模式，即优先使用网络数据。如果网络数据请求失败，再去请求缓存数据。")]),a._v(" "),t("p",[a._v("Yarn 会根据 cacheFolder+slug+node_modules+pkg.name 生成一个 path，判断系统中是否存在该 path，如果存在证明已经有缓存，不用重新下载。这个 path 也就是依赖包缓存的具体路径。")]),a._v(" "),t("h2",{attrs:{id:"解决了哪些-npm-问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决了哪些-npm-问题"}},[a._v("#")]),a._v(" 解决了哪些 npm 问题")]),a._v(" "),t("ul",[t("li",[a._v("yarn 缓存了每次你下载的模块")]),a._v(" "),t("li",[a._v("yarn 可以通过并行的网络请求最大限度利用网络资源")]),a._v(" "),t("li",[a._v("yarn 在开始安装一个包之前会先用 checksums 来验证，你不用担心本地的缓存的包被破坏了导致安装失败")]),a._v(" "),t("li",[a._v("...")])]),a._v(" "),t("h2",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" init "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm init")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm install")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --frozen-lockfile "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm ci")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" react "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm i -S react")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" -D webpack "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm i -D webpack")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" babel "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm i -g babel")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" remove vue "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除依赖包 npm uninstall vue")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" upgrade "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 升级 package.json 指定的所有依赖包(在package.json指定的版本范围内)")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" upgrade --latest "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 升级package.json指定的所有依赖包,但忽略package.json指定的版本范围,同时package.json中指定的版本将被重写")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" outdated "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出包的所有依赖项的版本信息。此信息包括当前安装的版本、基于语义版本所需的版本和最新的可用版本")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出包里所有可运行的脚本")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" run dev "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 运行package.json中scripts定义的脚本命令,等同于 npm runx")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" upgrade-interactive --latest "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 交互式升级")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global list --depth"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看全局安装的包")]),a._v("\n")])])]),t("h3",{attrs:{id:"global"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#global"}},[a._v("#")]),a._v(" global")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("查看全局安装包")])])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global list --depth"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),t("ul",[t("li",[t("strong",[a._v("移除全局安装包")])])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global remove xxx\n")])])]),t("h3",{attrs:{id:"config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[a._v("#")]),a._v(" config")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" config list "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" config list "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看当前目录相关config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" config get registry "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看当前下载源,初始为https://registry.yarnpkg.com")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" registry https://registry.npm.taobao.org -g "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更改为淘宝")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g\n")])])]),t("h3",{attrs:{id:"create"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create"}},[a._v("#")]),a._v(" create")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" create react-app my-app\n")])])]),t("p",[a._v("相当于执行了")]),a._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[a._v("yarn global add create"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("react"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("app\ncreate"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("react"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("app my"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("app\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);