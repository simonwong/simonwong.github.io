"use strict";(self.webpackChunknote=self.webpackChunknote||[]).push([[5943],{9613:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var a=t(9496);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=a.createContext({}),p=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(i.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},k=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),k=p(t),m=l,u=k["".concat(i,".").concat(m)]||k[m]||d[m]||r;return t?a.createElement(u,s(s({ref:n},c),{},{components:t})):a.createElement(u,s({ref:n},c))}));function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,s=new Array(r);s[0]=k;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o.mdxType="string"==typeof e?e:l,s[1]=o;for(var p=2;p<r;p++)s[p]=t[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}k.displayName="MDXCreateElement"},1605:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=t(2081),l=(t(9496),t(9613));const r={},s="Docker \u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528",o={unversionedId:"services/Docker\u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528",id:"services/Docker\u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528",title:"Docker \u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528",description:"Jenkins",source:"@site/docs/services/Docker\u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528.md",sourceDirName:"services",slug:"/services/Docker\u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528",permalink:"/docs/services/Docker\u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528",draft:!1,tags:[],version:"current",lastUpdatedAt:1660298396,formattedLastUpdatedAt:"Aug 12, 2022",frontMatter:{},sidebar:"services",previous:{title:"Docker \u5165\u95e8",permalink:"/docs/services/Docker\u57fa\u7840"},next:{title:"acme.sh \u8bc1\u4e66\u9881\u53d1",permalink:"/docs/services/acme.sh\u8bc1\u4e66\u9881\u53d1"}},i={},p=[{value:"Jenkins",id:"jenkins",level:2},{value:"\u521d\u59cb\u5316\u914d\u7f6e",id:"\u521d\u59cb\u5316\u914d\u7f6e",level:3},{value:"SSH \u914d\u7f6e",id:"ssh-\u914d\u7f6e",level:3},{value:"\u4f7f\u7528\u57df\u540d\u8bbf\u95ee",id:"\u4f7f\u7528\u57df\u540d\u8bbf\u95ee",level:3},{value:"\u5176\u4ed6\u95ee\u9898",id:"\u5176\u4ed6\u95ee\u9898",level:3},{value:"MySql",id:"mysql",level:2},{value:"\u8fdc\u7a0b\u8bbf\u95ee\u6743\u9650",id:"\u8fdc\u7a0b\u8bbf\u95ee\u6743\u9650",level:3},{value:"MongoDB",id:"mongodb",level:2},{value:"\u8fd0\u884c",id:"\u8fd0\u884c",level:3},{value:"\u8fdb\u5165\u4e0e\u7528\u6237",id:"\u8fdb\u5165\u4e0e\u7528\u6237",level:3},{value:"\u8fdc\u7a0b\u8fde\u63a5",id:"\u8fdc\u7a0b\u8fde\u63a5",level:3},{value:"Redis",id:"redis",level:2},{value:"\u8fdb\u5165\u5bb9\u5668",id:"\u8fdb\u5165\u5bb9\u5668",level:3},{value:"\u8fdc\u7a0b\u8fde\u63a5",id:"\u8fdc\u7a0b\u8fde\u63a5-1",level:3},{value:"nginx",id:"nginx",level:2},{value:"Elasticsearch \u96c6\u7fa4",id:"elasticsearch-\u96c6\u7fa4",level:2}],c={toc:p};function d(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"docker-\u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528"},"Docker \u4e0a\u5404\u79cd\u955c\u50cf\u7684\u4f7f\u7528"),(0,l.kt)("h2",{id:"jenkins"},"Jenkins"),(0,l.kt)("p",null,"Jenkins \u5b98\u65b9\u63a8\u8350\u7684\u955c\u50cf  ",(0,l.kt)("inlineCode",{parentName:"p"},"jenkinsci/blueocean ")," \u91cc\u9762\u6346\u7ed1\u4e86\u6240\u6709\u7684blueocean "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker run -d \\\n-u root \\\n-p 8999:8080 \\\n-p 50000:50000 \\\n-v /usr/local/jenkins_home:/var/jenkins_home \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\n--name jenkins \\\n--restart=always \\\njenkinsci/blueocean\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-v")," \u9664\u4e86\u5206\u914d jenkins \u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u8fd8\u5206\u914d\u4e86 docker \u63d0\u4f9b\u7ed9 \u5bb9\u5668\u4f7f\u7528"),(0,l.kt)("p",null,"\u8bbf\u95ee\u5bb9\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker exec -it jenkins bash\n")),(0,l.kt)("h3",{id:"\u521d\u59cb\u5316\u914d\u7f6e"},"\u521d\u59cb\u5316\u914d\u7f6e"),(0,l.kt)("p",null,"\u62ff\u5230\u521d\u59cb\u5bc6\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker logs jenkins\n# \u6216\u8005\n$ cat /usr/local/jenkins_home/secrets/initialAdminPassword\n")),(0,l.kt)("p",null,"\u5230\u4f60\u7684\u5916\u7f51 ",(0,l.kt)("inlineCode",{parentName:"p"},"x.x.x.x:8999")," \uff08\u53ef\u80fd\u9700\u8981\u914d\u7f6e\u4f60\u4e91\u670d\u52a1\u5668\u7684\u9632\u706b\u5899\uff09\u8f93\u5165\u521d\u59cb\u5bc6\u7801\uff0c\u914d\u7f6e\u7ba1\u7406\u5458\u7528\u6237\uff0c\u5b89\u88c5\u63d2\u4ef6"),(0,l.kt)("h3",{id:"ssh-\u914d\u7f6e"},"SSH \u914d\u7f6e"),(0,l.kt)("p",null,"\u8fdb\u5165\u5230\u5bb9\u5668\u540e"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u751f\u6210 ssh ")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},'$ ssh-keygen -t rsa -C "wsj_simon@163.com"\n')),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u590d\u5236\u5230\u5bbf\u4e3b\u673a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker cp jenkins:/root/.ssh/id_rsa.pub ~/.ssh/\n\n$ cd ~/.ssh\n\n$ cat id_rsa.pub >> authorized_keys\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u91cd\u542f ssh \u670d\u52a1")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ systemctl restart sshd.service\n")),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},"GitHub ssh \u914d\u7f6e")),(0,l.kt)("p",null,"settings/SSH and GPG keys/New SSH key \u65b0\u589e\u4e00\u4e2a ssh key"),(0,l.kt)("p",null,"PS :  \u914d\u7f6e\u4e86 ssh \u4e4b\u540e\u4e5f\u8bb8\u8fd8\u662f\u4e0d\u884c\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"jenkins The authenticity of host 'github.com (13.250.177.223)' can't be established.")," \u6216\u8005 ",(0,l.kt)("inlineCode",{parentName:"p"},"Authentication failed")," \u7b49\u7b49"),(0,l.kt)("p",null,"\u6709\u4e09\u79cd\u89e3\u51b3\u65b9\u6cd5\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"~/.ssh/known_hosts \u6587\u4ef6\u6dfb\u52a0\u516c\u94a5 \uff0c\u5982\u4e0b"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"github.com,13.250.177.223 ssh-rsa AAAxxxxx....\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u8fdb\u5165\u5230\u5bb9\u5668\u4e2d\uff0c\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"git clone xxxx"),"\u65f6\u4f1a\u663e\u793a ",(0,l.kt)("inlineCode",{parentName:"p"},"Are you sure you want to continue connecting (yes/no)?")," yes \uff0c\u5c31\u53ef\u4ee5\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e86")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5168\u5c40\u51ed\u636e\u914d\u7f6e\uff0c\u8303\u56f4\uff08scope\uff09\u9009\u62e9:",(0,l.kt)("inlineCode",{parentName:"p"},"\u5168\u5c40 (Jenkins, nodes, items, all child items, etc)")," ,\u7c7b\u578b\uff08kind\uff09\u9009\u62e9\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"SSH Username with private key")," \u3002\u586b\u5199 username\uff08\u968f\u4fbf\u586b\uff09\uff0cprivate key \u4ece ",(0,l.kt)("inlineCode",{parentName:"p"},"~/.ssh/id_rsa")," \u7684\u5185\u5bb9\u590d\u5236\u3002\u7136\u540e\u914d\u7f6e Credentials \u65f6\uff0c\u9009\u62e9 \u8fd9\u4e2a\u51ed\u636e\u3002"))),(0,l.kt)("h3",{id:"\u4f7f\u7528\u57df\u540d\u8bbf\u95ee"},"\u4f7f\u7528\u57df\u540d\u8bbf\u95ee"),(0,l.kt)("p",null,"\u53ef\u4ee5\u7528nginx \u53cd\u5411\u4ee3\u7406\u5230 jk \u7684\u7aef\u53e3"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"server {\n    listen                  8998;\n    server_name             myjenkins.com;\n\n    location / {\n        proxy_pass http://127.0.0.1:8999;\n    }\n}\n")),(0,l.kt)("h3",{id:"\u5176\u4ed6\u95ee\u9898"},"\u5176\u4ed6\u95ee\u9898"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u65f6\u95f4\u4e0d\u5bf9"),(0,l.kt)("p",{parentName:"li"},"  \u3010\u7cfb\u7edf\u7ba1\u7406\u3011=> \u3010\u811a\u672c\u547d\u4ee4\u8fd0\u884c\u3011"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"System.setProperty('org.apache.commons.jelly.tags.fmt.timeZone', 'Asia/Shanghai')\n")))),(0,l.kt)("h2",{id:"mysql"},"MySql"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker run --name mysql \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-d \\\n-p 3306:3306 \\\n-v /usr/local/mysql/conf:/etc/mysql/conf.d \\\n-v /usr/local/mysql/data:/var/lib/mysql \\\n--restart=always \\\nmysql\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-e MYSQL_ROOT_PASSWORD=123456")," \u8bbe\u7f6e root \u7528\u6237\u5bc6\u7801"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-d")," \u540e\u53f0\u8fd0\u884c"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-p 3306:3306")," \u6307\u5b9a\u7aef\u53e3"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--restart=always")," docker \u91cd\u542f\u540e\uff0c\u5bb9\u5668\u81ea\u52a8\u542f\u52a8"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--privileged=true")," \u5bb9\u5668\u5185\u7684root\u62e5\u6709\u771f\u6b63root\u6743\u9650\uff0c\u5426\u5219\u5bb9\u5668\u5185root\u53ea\u662f\u5916\u90e8\u666e\u901a\u7528\u6237\u6743\u9650"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-v ")," \u6302\u5728\u76ee\u5f55"),(0,l.kt)("p",null,"mysql \u7684\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/mysql/my.cnf"),"  ",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/mysql/conf.d"),"  \u540e\u8005\u662f\u4e2a\u6587\u4ef6\u5939\uff0c\u6743\u9650\u5927\u4e8e\u524d\u8005\u3002\u6587\u4ef6\u5939\u4e2d\u53ef\u4ee5\u547d\u540d\u4efb\u610f ",(0,l.kt)("inlineCode",{parentName:"p"},"xxx.cnf")," \u6765\u8986\u76d6 ",(0,l.kt)("inlineCode",{parentName:"p"},"my.cnf")),(0,l.kt)("p",null,"Mysql \u7684\u6570\u636e\u9ed8\u8ba4\u5b58\u653e\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"/var/lib/mysql")," \u4e2d"),(0,l.kt)("p",null,"\u8fdb\u5165"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"# \u8fdb\u5165\u5bb9\u5668\n$ docker exec -it mysql bash\n\n# \u767b\u9646\u8f93\u5165\u4e0a\u9762\u7684\u5bc6\u7801\n$ mysql -u root -p\n")),(0,l.kt)("h3",{id:"\u8fdc\u7a0b\u8bbf\u95ee\u6743\u9650"},"\u8fdc\u7a0b\u8bbf\u95ee\u6743\u9650"),(0,l.kt)("p",null,"\u8fd9\u91cc\u9700\u8981\u6709\u4e2a\u7528\u6237\u7684\u6982\u5ff5\u3002root \u7528\u6237\u6ca1\u6709\u5f00\u653e\u8fdc\u7a0b\u8bbf\u95ee\u6743\u9650\u3002\u800c\u662f\u53e6\u5916\u521b\u5efa\u4e86\u4e00\u4e2a simon \u7528\u6237\uff0c\u6388\u4e88\u8fdc\u7a0b\u8bbf\u95ee\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"# \u6dfb\u52a0\u8fdb\u5165\u5230mysql\u5bb9\u5668\u5185\u90e8\u624d\u80fd\u6267\u884c\u547d\u4ee4\u8bbe\u7f6e\u8fdc\u7a0b\u767b\u9646\u8d26\u53f7\u5bc6\u7801\n$ CREATE USER 'simon'@'%' IDENTIFIED WITH mysql_native_password BY '123456';\n\n# \u5f00\u542f\u8fdc\u7a0b\u8bbf\u95ee\u6743\u9650\n$ GRANT ALL PRIVILEGES ON *.* TO 'simon'@'%';\n\n# \u5237\u65b0\u6743\u9650\n$ flush privileges;    \n")),(0,l.kt)("p",null,"\u914d\u7f6e conf \u6587\u4ef6\u4f7f\u5f97\u5916\u90e8\u53ef\u4ee5\u8fde\u63a5\uff0c\u8bb0\u5f97\u5f00\u653e\u9632\u706b\u5899"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"[mysqld]\n\nbind-address = 0.0.0.0\n")),(0,l.kt)("h2",{id:"mongodb"},"MongoDB"),(0,l.kt)("h3",{id:"\u8fd0\u884c"},"\u8fd0\u884c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker run --name mongo -d -p 27017:27017 -v /usr/local/mongo/conf:/etc/mongo -v /usr/local/mongo/data:/data/db --restart=always mongo --auth --config /etc/mongo/mongod.conf\n")),(0,l.kt)("p",null,"docker run --name mongo -d -p 27017:27017 mongo --auth"),(0,l.kt)("p",null,"mongo \u914d\u7f6e"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--auth")," \u9700\u8981\u5bc6\u7801\u624d\u80fd\u8bbf\u95ee\u5bb9\u5668\u670d\u52a1"),(0,l.kt)("p",null,"Mongoldb \u7684\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/mongo/mongod.conf")),(0,l.kt)("p",null,"Mongoldb \u7684\u6570\u636e\u9ed8\u8ba4\u5b58\u653e\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"/data/db")," \u4e2d"),(0,l.kt)("h3",{id:"\u8fdb\u5165\u4e0e\u7528\u6237"},"\u8fdb\u5165\u4e0e\u7528\u6237"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"docker exec -it mongo mongo admin\n")),(0,l.kt)("p",null,"\u4ee5admin \u7684\u8eab\u4efd\u767b\u9646 mongo"),(0,l.kt)("p",null,"\u521b\u5efa admin"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"db.createUser({ user:'admin',pwd:'123456',roles:[ { role:'root', db: 'admin'}]});\n")),(0,l.kt)("p",null,"\u4f7f\u7528\u7528\u6237\u767b\u9646"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"db.auth('admin', '123456')\n")),(0,l.kt)("p",null,"\u6307\u5b9a\u67d0\u4e2a\u6570\u636e\u5e93\u7684\u7528\u6237\u6743\u9650"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"use test\ndb.createUser({\n    user: 'testUser',\n    pwd: 'testPwd',\n    roles: ['readWrited']\n})\n")),(0,l.kt)("h3",{id:"\u8fdc\u7a0b\u8fde\u63a5"},"\u8fdc\u7a0b\u8fde\u63a5"),(0,l.kt)("p",null,"\u914d\u7f6e conf \u6587\u4ef6\u4f7f\u5f97\u5916\u90e8\u53ef\u4ee5\u8fde\u63a5\u3002\u597d\u50cf\u4e0d\u914d\u7f6e\u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u8bb0\u5f97\u914d\u7f6e\u9632\u706b\u5899"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-conf"},"net:\n   bindIp: 0.0.0.0\n   port: 27017\n")),(0,l.kt)("h2",{id:"redis"},"Redis"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker run --name redis -d -p 6379:6379 -v /usr/local/redis/conf/redis.conf:/usr/local/etc/redis/redis.conf -v /usr/local/redis/data:/data --restart=always redis redis-server /usr/local/etc/redis/redis.conf --appendonly yes\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"}," redis-server xx.conf --appendonly yes")),(0,l.kt)("p",null,"\u542f\u52a8 redis \u670d\u52a1\u5668\uff0c"),(0,l.kt)("p",null," xx.conf \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff0c"),(0,l.kt)("p",null,"appendonly \u6253\u5f00Redis\u6301\u4e45\u5316\u914d\u7f6e\u3002"),(0,l.kt)("p",null,"Redis \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u4e0b\u8f7d ",(0,l.kt)("a",{parentName:"p",href:"http://download.redis.io/releases/"},"http://download.redis.io/releases/")),(0,l.kt)("p",null,"Redis \u7684\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 ",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/etc/redis/redis.conf")),(0,l.kt)("p",null,"Redis \u7684\u6570\u636e\u9ed8\u8ba4\u5b58\u653e\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"/data")),(0,l.kt)("p",null,"\u8bbe\u7f6e conf \u6587\u4ef6\u4e0b\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"requirepass yourpassword")),(0,l.kt)("h3",{id:"\u8fdb\u5165\u5bb9\u5668"},"\u8fdb\u5165\u5bb9\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"# \u4f7f\u7528 redis-cli\n$ docker exec -it redis redis-cli\n\n# \u83b7\u53d6\u6743\u9650\u64cd\u4f5c\n$ auth yourpassword\n")),(0,l.kt)("h3",{id:"\u8fdc\u7a0b\u8fde\u63a5-1"},"\u8fdc\u7a0b\u8fde\u63a5"),(0,l.kt)("p",null,"\u53ef\u4ee5\u4e0b\u8f7d\u5ba2\u6237\u7aef ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/qishibo/AnotherRedisDesktopManager"},"AnotherRedisDesktopManager")," "),(0,l.kt)("p",null,"\u8fdc\u7a0b\u8fde\u63a5\u9700\u8981\u4fee\u6539conf\u6587\u4ef6\u3002\u6211\u8fd9\u91cc\u53ea\u4fee\u6539\u4e86 bind \u5c31\u53ef\u4ee5\uff0c\u5982\u679c\u4e0d\u53ef\u4ee5\u518d\u6dfb\u52a0 protected-mode"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"daemonize no\nbind 0.0.0.0\nprotected-mode no\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"daemonize no")," \u5728Docker\u4e2d\u540e\u53f0\u542f\u52a8\u4e00\u4e2a\u955c\u50cf\uff0c\u5f53\u524d\u53f0\u65e0\u54cd\u5e94\u65f6\u4f1a\u81ea\u52a8\u9000\u51fa\u3002Redis \u8fdb\u7a0b\u88ab\u540e\u53f0\u5316\u540e\uff0c \u542f\u52a8Redis\u7684\u90a3\u4e2a\u8fdb\u7a0b\uff0c\u4e5f\u5c31\u662fDocker\u6267\u884c\u8fdb\u7a0b\u65e0\u4e8b\u53ef\u505a\uff0c\u56e0\u6b64Docker\u6267\u884c\u8fdb\u7a0b\u9000\u51fa\u3002\u5f53\u7136\u5982\u679c\u4f60\u7684Redis\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6ca1\u6709\u540e\u53f0\u8fd0\u884c\uff0c\u5c31\u4e0d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u72b6\u51b5\u3002\u5c06Redis\u7684\u540e\u53f0\u8fd0\u884c\u6539\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"no"),"\uff0c\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u3002"),(0,l.kt)("h2",{id:"nginx"},"nginx"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"nginx:alpine")," \u7248\u672c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-powershell"},"$ docker run --name nginx_center \\\n-d \\\n-p 80:80 \\\n-p 443:443 \\\n-v /usr/local/nginx/conf.d:/etc/nginx/conf.d \\\n-v /usr/local/nginx/nginx.conf:/etc/nginx/nginx.conf \\\n-v /usr/local/nginx/ssl:/etc/nginx/ssl \\\n--restart=always \\\nnginx:alpine\n")),(0,l.kt)("p",null,"html \u9ed8\u8ba4\u4f4d\u7f6e\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/share/nginx/html")),(0,l.kt)("p",null,"Log \u9ed8\u8ba4\u4f4d\u7f6e\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"/var/log/nginx")),(0,l.kt)("p",null,"\u9ed8\u8ba4\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/nginx/conf.d/default.conf")),(0,l.kt)("h2",{id:"elasticsearch-\u96c6\u7fa4"},"Elasticsearch \u96c6\u7fa4"),(0,l.kt)("p",null,"\u4fee\u6539\u7cfb\u7edf\u8bbe\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/sysctl.conf")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-conf"},"vm.max_map_count=262144\n#...\n")),(0,l.kt)("p",null,"\u6267\u884c ",(0,l.kt)("inlineCode",{parentName:"p"},"sysctl -p")," \u6765\u4f7f\u5f97\u914d\u7f6e\u751f\u6548"),(0,l.kt)("p",null,"\u53c2\u8003 ",(0,l.kt)("a",{parentName:"p",href:"https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-docker.html"},"https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-docker.html")),(0,l.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6 es/docker-compose.yml"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'version: \'3\'\nservices:\n  es01:\n    image: elasticsearch:7.9.1\n    container_name: yueqing_es01\n    environment:\n      - node.name=es01\n      - cluster.name=es-docker-cluster\n      - network.bind_host=0.0.0.0\n      - discovery.seed_hosts=es02\n      - cluster.initial_master_nodes=es01,es02\n      - bootstrap.memory_lock=true\n      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - data01:/usr/share/elasticsearch/data\n    ports:\n      - 9200:9200\n    networks:\n      - elastic\n  es02:\n    image: elasticsearch:7.9.1\n    container_name: yueqing_es02\n    environment:\n      - node.name=es02\n      - cluster.name=es-docker-cluster\n      - network.bind_host=0.0.0.0\n      - discovery.seed_hosts=es01\n      - cluster.initial_master_nodes=es01,es02\n      - bootstrap.memory_lock=true\n      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - data02:/usr/share/elasticsearch/data\n    networks:\n      - elastic\n  kibana:\n    image: kibana:7.9.1\n    container_name: yueqing_kibana\n    restart: always\n    ports:\n      - 5601:5601\n    environment:\n      I18N_LOCALE: zh-CN\n      ELASTICSEARCH_URL: http://es01:9200\n      ELASTICSEARCH_HOSTS: http://es01:9200\n    # volumes:\n      # - ./kibana.yml:/usr/share/kibana/config/kibana.yml\n    networks:\n      - elastic\nvolumes:\n  data01:\n    driver: local\n  data02:\n    driver: local\nnetworks:\n  elastic:\n    external: true\n    driver: bridge\n\n')),(0,l.kt)("p",null,"\u6267\u884c ",(0,l.kt)("inlineCode",{parentName:"p"},"docker-compose up -d")," \u542f\u52a8\u96c6\u7fa4"))}d.isMDXComponent=!0}}]);