(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{373:function(a,e,s){"use strict";s.r(e);var t=s(27),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"acme-sh-证书颁发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#acme-sh-证书颁发"}},[a._v("#")]),a._v(" acme.sh 证书颁发")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"}},[a._v("acme.sh 中文 wiki"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://f-e-d.club/topic/use-acme-sh-deployment-let-s-encrypt-by-ali-cloud-dns-generic-domain-https-authentication.article",target:"_blank",rel:"noopener noreferrer"}},[a._v("使用 acme.sh 部署 Let's Encrypt 通过阿里云 DNS 验证方式实现泛域名 HTTPS"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"安装acme-sh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装acme-sh"}},[a._v("#")]),a._v(" 安装acme.sh")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v("  https://get.acme.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重载 bashrc")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" ~/.bashrc\n")])])]),s("h2",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("acme.sh --upgrade")]),a._v(" 更新")]),a._v(" "),s("li",[s("code",[a._v("acme.sh --upgrade --auto-upgrade")]),a._v(" 自动更新")]),a._v(" "),s("li",[s("code",[a._v("acme.sh --upgrade --auto-upgrade 0")]),a._v(" 关闭自动更新")])]),a._v(" "),s("h2",{attrs:{id:"添加配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加配置"}},[a._v("#")]),a._v(" 添加配置")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# .bashrc\nexport Ali_Key="AccessKeyId"\nexport Ali_Secret="AccessKeySecret"\n\n# shell\nsource ~./bashrc\n')])])]),s("h2",{attrs:{id:"dns-验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns-验证"}},[a._v("#")]),a._v(" DNS 验证")]),a._v(" "),s("h3",{attrs:{id:"生成证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成证书"}},[a._v("#")]),a._v(" 生成证书")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("acme.sh --issue --dns dns_ali -d wangsijie.top -d *.wangsijie.top\n")])])]),s("p",[a._v("证书生成目录")]),a._v(" "),s("p",[s("code",[a._v("/root/.acme.sh/wangsijie.top/wangsijie.top.cer")]),a._v(" "),s("code",[a._v("/root/.acme.sh/wangsijie.top/wangsijie.top.key")]),a._v(" "),s("code",[a._v("/root/.acme.sh/wangsijie.top/ca.cer")]),a._v(" "),s("code",[a._v("/root/.acme.sh/wangsijie.top/fullchain.cer")])]),a._v(" "),s("p",[a._v("Ps: nginx 不能使用上面的目录，因为是动态的")]),a._v(" "),s("h2",{attrs:{id:"拷贝-安装证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拷贝-安装证书"}},[a._v("#")]),a._v(" 拷贝/安装证书")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("acme.sh  --installcert  -d  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("domain"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(".com\n\t--key-file   /etc/nginx/ssl/"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("domain"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(".key\n\t--fullchain-file /etc/nginx/ssl/fullchain.cer\n\t--reloadcmd  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"service nginx force-reload"')]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("acme.sh --installcert "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-d  wangsijie.top "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--key-file    /usr/local/nginx/ssl/wangsijie.top.key "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--fullchain-file /usr/local/nginx/ssl/fullchain.cer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--reloadcmd  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"service nginx force-reload"')]),a._v("\n")])])]),s("p",[a._v("reloadcmd 相当于一个重启的钩子，当证书更新后，需要重启你的 nginx 或者 docker 服务，你需要自己配置对应的命令")]),a._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),s("p",[s("a",{attrs:{href:"%5Bhttps://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E%5D(https://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E)"}},[a._v("acme.sh 中文 wiki")])]),a._v(" "),s("p",[s("a",{attrs:{href:"https://f-e-d.club/topic/use-acme-sh-deployment-let-s-encrypt-by-ali-cloud-dns-generic-domain-https-authentication.article",target:"_blank",rel:"noopener noreferrer"}},[a._v("使用 acme.sh 部署 Let's Encrypt 通过阿里云 DNS 验证方式实现泛域名 HTTPS"),s("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=r.exports}}]);