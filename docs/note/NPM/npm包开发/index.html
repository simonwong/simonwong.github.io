<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">npm包开发 | 王思杰的技术笔记</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://simonwong.github.io//docs/note/NPM/npm包开发"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="npm包开发 | 王思杰的技术笔记"><meta data-react-helmet="true" name="description" content="npm 包规范"><meta data-react-helmet="true" property="og:description" content="npm 包规范"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://simonwong.github.io//docs/note/NPM/npm包开发"><link data-react-helmet="true" rel="alternate" href="https://simonwong.github.io//docs/note/NPM/npm包开发" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://simonwong.github.io//docs/note/NPM/npm包开发" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7b49b61d.css">
<link rel="preload" href="/assets/js/runtime~main.19e8a2b0.js" as="script">
<link rel="preload" href="/assets/js/main.0fdbf1b2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">王思杰的技术笔记</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/note">日常笔记</a><a class="navbar__item navbar__link" href="/docs/advanced">前端进阶</a><a class="navbar__item navbar__link" href="/docs/backend">后端</a><a class="navbar__item navbar__link" href="/docs/services">服务器</a><a class="navbar__item navbar__link" href="/docs/computerbasic">计算机基础</a><a class="navbar__item navbar__link" href="/docs/tools">工具</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/simonwong" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>王思杰的技术笔记</b></a><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note">目录</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/日常笔记">日常笔记</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">React</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">NPM</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/note/NPM/npm基础">npm 基础</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/note/NPM/npm机制">npm 机制</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/note/NPM/npm包开发">npm包开发</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/note/NPM/yarn">yarn</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">小程序</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Just JavaScript</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/常用的css">常用的CSS</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/webapp">webapp 开发总结</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/正则表达式">正则表达式</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/提升开发体验">提升开发体验</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/webpack4-note">webpack 4 笔记</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/typescript-note">TypeScript 笔记</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/umi-note">umi 使用笔记</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/AppleScript-note">AppleScript 笔记</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/macbook-note">Macbook 笔记</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/note/日常笔记2018-2020">日常笔记2018-2020</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>npm包开发</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="npm-包规范"></a>npm 包规范<a class="hash-link" href="#npm-包规范" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="目录"></a>目录<a class="hash-link" href="#目录" title="Direct link to heading">#</a></h3><ul><li>bin：存放可执行二进制文件的目录</li><li>lib：存放js代码的目录</li><li>doc：存放文档的目录</li><li>test：存放单元测试用例代码的目录</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="命令"></a>命令<a class="hash-link" href="#命令" title="Direct link to heading">#</a></h3><p><code>npm version patch</code> 升级补丁 <code>0.0.1</code> 变成 <code>0.0.2</code></p><p><code>npm version minor</code> 升级补丁 <code>0.0.1</code> 变成 <code>0.1.0</code></p><p><code>npm version major</code> 升级补丁 <code>0.0.1</code> 变成 <code>1.0.0</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="本地调试开发"></a>本地调试开发<a class="hash-link" href="#本地调试开发" title="Direct link to heading">#</a></h3><p>使用 <code>npm link</code> 调试</p><ul><li>假如我的项目是 <code>koalaNpmStudy</code>，假如我的 npm 模块包名称是 <code>npm-ikoala</code></li><li>进入到 模块包 <code>npm-ikoala</code> 目录中，执行 <code>npm link</code></li><li>在自己的项目 <code>koalaNpmStudy</code> 中创建连接执行 <code>npm link npm-ikoala</code></li><li>在自己项目的 <code>node_module</code> 中会看到链接过来的模块包，然后就可以像使用其他的模块包一样使用它了。</li><li>调试结束后可以使用 <code>npm unlink</code> 取消关联</li></ul><p><code>npm link</code> 主要做了两件事：</p><ol><li>为目标 <code>npm</code> 模块创建软链接，将其链接到全局 <code>node</code> 模块安装路径 <code>/usr/local/lib/node_modules/</code>。</li><li>为目标 <code>npm</code> 模块的可执行 <code>bin</code> 文件创建软链接，将其链接到全局 <code>node</code> 命令安装路径 <code>/usr/local/bin/</code>。</li></ol><p>npm link 的本质就是软链接</p><ul><li>为目标 npm 模块（npm-package-1）创建软链接，将其链接到全局 node 模块安装路径 /usr/local/lib/node_modules/ 中；</li><li>为目标 npm 模块（npm-package-1）的可执行 bin 文件创建软链接，将其链接到全局 node 命令安装路径 /usr/local/bin/ 中。</li></ul><p>使用 <code>npm link</code> 或者 <code>yarn link</code> </p><p>然后在你的项目中 <code>npm link package]</code> 或 <code>yarn link [package]</code> 来链接包。</p><p>就可以在项目是使用这个包了。</p><p>可能 link 后忘记了，然后会报</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">If this command was run in another folder with the same name, the other folder is still linked. Please run yarn unlink in the other folder if you want to register this folder.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>只要去 <code>~/.config/yarn/link</code> 删除一下</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="lerna-管理多个包的项目"></a><a href="https://github.com/lerna/lerna" target="_blank" rel="noopener noreferrer">lerna</a> 管理多个包的项目<a class="hash-link" href="#lerna-管理多个包的项目" title="Direct link to heading">#</a></h2><p><code>lerna bootstrap</code> 将包安装在根目录</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="np-优化-npm-publish"></a><a href="https://github.com/sindresorhus/np" target="_blank" rel="noopener noreferrer">np</a> 优化 npm publish<a class="hash-link" href="#np-优化-npm-publish" title="Direct link to heading">#</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/note/NPM/npm包开发.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/note/NPM/npm机制"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« npm 机制</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/note/NPM/yarn"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">yarn »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#npm-包规范" class="table-of-contents__link">npm 包规范</a><ul><li><a href="#目录" class="table-of-contents__link">目录</a></li><li><a href="#命令" class="table-of-contents__link">命令</a></li><li><a href="#本地调试开发" class="table-of-contents__link">本地调试开发</a></li></ul></li><li><a href="#lerna-管理多个包的项目" class="table-of-contents__link">lerna 管理多个包的项目</a></li><li><a href="#np-优化-npm-publish" class="table-of-contents__link">np 优化 npm publish</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/note">日常笔记</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/advanced">前端进阶</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/wsj_simonwong" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.wangsijie.top/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>哎呦，你来啦<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/simonwong" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2019-2021 Simon Wong.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.19e8a2b0.js"></script>
<script src="/assets/js/main.0fdbf1b2.js"></script>
</body>
</html>