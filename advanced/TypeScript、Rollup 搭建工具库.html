<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScriptã€Rollup æ­å»ºå·¥å…·åº“ | ç‹æ€æ°çš„å‰ç«¯ç¬”è®°</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="åˆ†äº«æ—¥å¸¸æ€»ç»“ï¼Œå·¥å…·æ¡†æ¶çš„ä½¿ç”¨ä»¥åŠæ•´ç†">
    <link rel="preload" href="/assets/css/0.styles.8ac2847d.css" as="style"><link rel="preload" href="/assets/js/app.2e783a63.js" as="script"><link rel="preload" href="/assets/js/2.728175a7.js" as="script"><link rel="preload" href="/assets/js/10.530c7dd2.js" as="script"><link rel="prefetch" href="/assets/js/11.018ee419.js"><link rel="prefetch" href="/assets/js/12.ce526c2c.js"><link rel="prefetch" href="/assets/js/13.4c4381d9.js"><link rel="prefetch" href="/assets/js/14.838996de.js"><link rel="prefetch" href="/assets/js/15.a1cbcb7b.js"><link rel="prefetch" href="/assets/js/16.19c6edb6.js"><link rel="prefetch" href="/assets/js/17.f87c7676.js"><link rel="prefetch" href="/assets/js/18.92e5edd5.js"><link rel="prefetch" href="/assets/js/19.e5957997.js"><link rel="prefetch" href="/assets/js/20.8290c85e.js"><link rel="prefetch" href="/assets/js/21.4e726e1a.js"><link rel="prefetch" href="/assets/js/22.2ffeee39.js"><link rel="prefetch" href="/assets/js/23.31aa91c1.js"><link rel="prefetch" href="/assets/js/24.fddeb593.js"><link rel="prefetch" href="/assets/js/25.e82e95e9.js"><link rel="prefetch" href="/assets/js/26.667047c9.js"><link rel="prefetch" href="/assets/js/27.06cebe01.js"><link rel="prefetch" href="/assets/js/28.93a33258.js"><link rel="prefetch" href="/assets/js/29.5161b9e7.js"><link rel="prefetch" href="/assets/js/3.224a2ee2.js"><link rel="prefetch" href="/assets/js/30.5ba8b7b1.js"><link rel="prefetch" href="/assets/js/31.bf461b5c.js"><link rel="prefetch" href="/assets/js/32.9f74dbce.js"><link rel="prefetch" href="/assets/js/33.974b1e7f.js"><link rel="prefetch" href="/assets/js/34.3868fe30.js"><link rel="prefetch" href="/assets/js/35.e03f6a61.js"><link rel="prefetch" href="/assets/js/36.4c686ca0.js"><link rel="prefetch" href="/assets/js/37.57206eea.js"><link rel="prefetch" href="/assets/js/38.0cd9b83c.js"><link rel="prefetch" href="/assets/js/39.f88351d0.js"><link rel="prefetch" href="/assets/js/4.669d567f.js"><link rel="prefetch" href="/assets/js/40.71c30a31.js"><link rel="prefetch" href="/assets/js/41.1bb963bf.js"><link rel="prefetch" href="/assets/js/42.879d80c6.js"><link rel="prefetch" href="/assets/js/43.7573b2b2.js"><link rel="prefetch" href="/assets/js/44.9733c42a.js"><link rel="prefetch" href="/assets/js/45.c89ed9b7.js"><link rel="prefetch" href="/assets/js/46.42314ca1.js"><link rel="prefetch" href="/assets/js/47.d8e2ef85.js"><link rel="prefetch" href="/assets/js/48.bcc8c86f.js"><link rel="prefetch" href="/assets/js/49.dc9e5d02.js"><link rel="prefetch" href="/assets/js/5.2828caad.js"><link rel="prefetch" href="/assets/js/50.1c551bef.js"><link rel="prefetch" href="/assets/js/51.ae248a8d.js"><link rel="prefetch" href="/assets/js/52.e23996a5.js"><link rel="prefetch" href="/assets/js/53.f7dac801.js"><link rel="prefetch" href="/assets/js/54.9a3fa0f7.js"><link rel="prefetch" href="/assets/js/55.3c085be8.js"><link rel="prefetch" href="/assets/js/56.2546b0da.js"><link rel="prefetch" href="/assets/js/57.0bcbe8c1.js"><link rel="prefetch" href="/assets/js/58.f45130d8.js"><link rel="prefetch" href="/assets/js/59.0f5e0da8.js"><link rel="prefetch" href="/assets/js/6.394c592c.js"><link rel="prefetch" href="/assets/js/60.3bff14d5.js"><link rel="prefetch" href="/assets/js/61.b3929af4.js"><link rel="prefetch" href="/assets/js/62.90d3fe44.js"><link rel="prefetch" href="/assets/js/63.1e494808.js"><link rel="prefetch" href="/assets/js/64.b268e7c2.js"><link rel="prefetch" href="/assets/js/65.10c5ec55.js"><link rel="prefetch" href="/assets/js/66.a6673875.js"><link rel="prefetch" href="/assets/js/67.bce38f01.js"><link rel="prefetch" href="/assets/js/68.3fceaf47.js"><link rel="prefetch" href="/assets/js/69.91bc6c01.js"><link rel="prefetch" href="/assets/js/7.18c5424e.js"><link rel="prefetch" href="/assets/js/70.e568222e.js"><link rel="prefetch" href="/assets/js/71.8fe37299.js"><link rel="prefetch" href="/assets/js/72.dade665e.js"><link rel="prefetch" href="/assets/js/73.2503b82e.js"><link rel="prefetch" href="/assets/js/74.a6c5d894.js"><link rel="prefetch" href="/assets/js/75.d465be9e.js"><link rel="prefetch" href="/assets/js/76.ff51464e.js"><link rel="prefetch" href="/assets/js/77.d628f52f.js"><link rel="prefetch" href="/assets/js/78.c8dbe1fd.js"><link rel="prefetch" href="/assets/js/79.aca8d23a.js"><link rel="prefetch" href="/assets/js/8.c0419011.js"><link rel="prefetch" href="/assets/js/80.4253620f.js"><link rel="prefetch" href="/assets/js/9.301dfbee.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ac2847d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ç‹æ€æ°çš„å‰ç«¯ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">
  æ—¥å¸¸ç¬”è®°
</a></div><div class="nav-item"><a href="/advanced/webpack/" class="nav-link">
  å‰ç«¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/backend/nodeåŸºç¡€/" class="nav-link">
  åç«¯
</a></div><div class="nav-item"><a href="/services/nginxåŸºç¡€/" class="nav-link">
  æœåŠ¡å™¨
</a></div><div class="nav-item"><a href="/computerbasic/è¿›åˆ¶/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  å·¥å…·
</a></div><div class="nav-item"><a href="https://github.com/simonwong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">
  æ—¥å¸¸ç¬”è®°
</a></div><div class="nav-item"><a href="/advanced/webpack/" class="nav-link">
  å‰ç«¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/backend/nodeåŸºç¡€/" class="nav-link">
  åç«¯
</a></div><div class="nav-item"><a href="/services/nginxåŸºç¡€/" class="nav-link">
  æœåŠ¡å™¨
</a></div><div class="nav-item"><a href="/computerbasic/è¿›åˆ¶/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  å·¥å…·
</a></div><div class="nav-item"><a href="https://github.com/simonwong" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/advanced/webpack/" class="sidebar-link">Webpack æ¦‚å¿µ</a></li><li><a href="/advanced/webpack/config.html" class="sidebar-link">Webpack é…ç½®</a></li><li><a href="/advanced/webpack/optimization.html" class="sidebar-link">Webpack æ€§èƒ½ä¼˜åŒ–</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git æ“ä½œæŒ‡å—</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/advanced/npm.html" class="sidebar-link">npm</a></li><li><a href="/advanced/yarn.html" class="sidebar-link">yarn</a></li><li><a href="/advanced/TypeScript.html" class="sidebar-link">TypeScript</a></li><li><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html" class="active sidebar-link">TypeScriptã€Rollup æ­å»ºå·¥å…·åº“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#å‰æ™¯æè¦" class="sidebar-link">å‰æ™¯æè¦</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#åˆå§‹åŒ–é¡¹ç›®" class="sidebar-link">åˆå§‹åŒ–é¡¹ç›®</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#é…ç½®-eslint" class="sidebar-link">é…ç½® eslint</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#é…ç½®-rollup" class="sidebar-link">é…ç½® rollup</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#é…ç½®-jest" class="sidebar-link">é…ç½® jest</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#é…ç½®-microsoft-api-extractor" class="sidebar-link">é…ç½® @microsoft/api-extractor</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#gulp-è‡ªåŠ¨åŒ–æ„å»º" class="sidebar-link">gulp è‡ªåŠ¨åŒ–æ„å»º</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#changelog-è‡ªåŠ¨ç”Ÿæˆ" class="sidebar-link">changelog è‡ªåŠ¨ç”Ÿæˆ</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#ä¼˜åŒ–å¼€å‘æµç¨‹" class="sidebar-link">ä¼˜åŒ–å¼€å‘æµç¨‹</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#ä¼˜åŒ–å‘å¸ƒæµç¨‹" class="sidebar-link">ä¼˜åŒ–å‘å¸ƒæµç¨‹</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#changelog-ä¾‹å­" class="sidebar-link">changelog ä¾‹å­</a></li><li class="sidebar-sub-header"><a href="/advanced/TypeScriptã€Rollup æ­å»ºå·¥å…·åº“.html#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a></li></ul></li><li><a href="/advanced/ä» webpack æ‰“åŒ…çœ‹å‰ç«¯æ¨¡å—åŒ–.html" class="sidebar-link">ä» webpack æ‰“åŒ…çœ‹å‰ç«¯æ¨¡å—åŒ–</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescriptã€rollup-æ­å»ºå·¥å…·åº“"><a href="#typescriptã€rollup-æ­å»ºå·¥å…·åº“" class="header-anchor">#</a> TypeScriptã€Rollup æ­å»ºå·¥å…·åº“</h1> <p><img src="http://file.wangsijie.top/blog/20191226183850.png" alt=""></p> <h2 id="å‰æ™¯æè¦"><a href="#å‰æ™¯æè¦" class="header-anchor">#</a> å‰æ™¯æè¦</h2> <p>å…¬å¸å†…æ€»æ˜¯æœ‰è®¸å¤šé€šç”¨çš„å·¥å…·æ–¹æ³•ã€ä¸šåŠ¡åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æ­å»ºä¸€ä¸ªå·¥å…·åº“æ¥ç»™å„ä¸ªé¡¹ç›®ä½¿ç”¨ã€‚</p> <p>è¦å®ç°çš„éœ€æ±‚ï¼šğŸ¤”</p> <ul><li>æ”¯æŒç¼–è¾‘å™¨çš„å¿«é€Ÿè¡¥å…¨å’Œæç¤º</li> <li>è‡ªåŠ¨åŒ–æ„å»º</li> <li>æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ changlog</li> <li>ä»£ç é€šè¿‡ lint å’Œæµ‹è¯•åæ‰èƒ½æäº¤ã€å‘å¸ƒ</li></ul> <h3 id="æ¶‰åŠçš„åº“"><a href="#æ¶‰åŠçš„åº“" class="header-anchor">#</a> æ¶‰åŠçš„åº“</h3> <ul><li>eslint + @typescript-eslint/parser</li> <li>rollup</li> <li>jest</li> <li>@microsoft/api-extractor</li> <li>gulp</li></ul> <h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="header-anchor">#</a> åˆå§‹åŒ–é¡¹ç›®</h2> <p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ç›®å½•å¦‚ <code>fly-helper</code> , å¹¶ <code>npm init</code> åˆå§‹åŒ–é¡¹ç›®ã€‚</p> <h3 id="å®‰è£…-typescript"><a href="#å®‰è£…-typescript" class="header-anchor">#</a> å®‰è£… <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer">TypeScript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D typescript
</code></pre></div><p>åˆ›å»º <code>src</code> ç›®å½•ï¼Œå…¥å£æ–‡ä»¶ï¼Œä»¥åŠ ts çš„é…ç½®æ–‡ä»¶</p> <div class="language- extra-class"><pre class="language-text"><code>fly-helper
 |
 |- src
 	 |- index.ts
 |- tsconfig.json
</code></pre></div><h3 id="é…ç½®-tsconfig-json"><a href="#é…ç½®-tsconfig-json" class="header-anchor">#</a> é…ç½® tsconfig.json</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">/*  tsconfig.json */</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* åŸºç¡€é…ç½® */</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;esnext&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;removeComments&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;declaration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">/* å¼ºç±»å‹æ£€æŸ¥é…ç½® */</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">/* æ¨¡å—åˆ†æé…ç½® */</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å‚è€ƒ-commit"><a href="#å‚è€ƒ-commit" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/1892d46aa6131806f720581737af60ea0c2fd4c2" target="_blank" rel="noopener noreferrer">1892d4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Psï¼šcommit ä¸­è¿˜å¢åŠ äº† .editorconfig  ï¼Œæ¥çº¦æŸåŒå­¦ä»¬çš„ä»£ç æ ¼å¼</p> <h2 id="é…ç½®-eslint"><a href="#é…ç½®-eslint" class="header-anchor">#</a> é…ç½® eslint</h2> <p>TypeScirpt å·²ç»å…¨é¢é‡‡ç”¨ ESLint ä½œä¸ºä»£ç æ£€æŸ¥ <a href="https://eslint.org/blog/2019/01/future-typescript-eslint" target="_blank" rel="noopener noreferrer">The future of TypeScript on ESLint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å¹¶ä¸”æä¾›äº† TypeScript æ–‡ä»¶çš„è§£æå™¨ <a href="https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/parser" target="_blank" rel="noopener noreferrer">@typescript-eslint/parser<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å’Œé…ç½®é€‰é¡¹ <a href="https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/eslint-plugin" target="_blank" rel="noopener noreferrer">@typescript-eslint/eslint-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin 
</code></pre></div><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="header-anchor">#</a> ç›®å½•ç»“æ„</h3> <div class="language- extra-class"><pre class="language-text"><code>fly-helper
 |- .eslintignore
 |- .eslintrc.js
 |- tsconfig.eslint.json
</code></pre></div><h3 id="ps"><a href="#ps" class="header-anchor">#</a> Ps</h3> <p>tsconfig.eslint.json æˆ‘ä»¬æ ¹ç›®å½•ä¸­å¢åŠ äº†ä¸€ä¸ª tsconfig æ–‡ä»¶ï¼Œå®ƒå°†ç”¨äº <code>eslintrc.parserOptions.project</code> ï¼Œç”±äºè¯¥é…ç½®è¦æ±‚ incude æ¯ä¸ª tsã€js æ–‡ä»¶ã€‚è€Œæˆ‘ä»¬ä»…éœ€è¦æ‰“åŒ… src ç›®å½•ä¸‹çš„ä»£ç ï¼Œæ‰€ä»¥å¢åŠ äº†è¯¥é…ç½®æ–‡ä»¶ã€‚</p> <p>å¦‚æœ <code>eslintrc.parserOptions.project</code> é…ç½®ä¸º tsconfig.json ã€‚src æ–‡ä»¶ä»¥å¤–çš„ tsã€js æ–‡ä»¶éƒ½ä¼šæŠ¥é”™ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>Parsing error: &quot;parserOptions.project&quot; has been set for @typescript-eslint/parser.
The file does not match your project config: config.ts.
The file must be included in at least one of the projects provided.eslint
</code></pre></div><p>è™½ç„¶å¯ä»¥é…ç½® <code>eslintrc.parserOptions.createDefaultProgram</code> ä½†ä¼šé€ æˆå·¨å¤§çš„æ€§èƒ½æŸè€—ã€‚</p> <p><a href="https://github.com/typescript-eslint/typescript-eslint/issues/967" target="_blank" rel="noopener noreferrer">issus: Parsing error: &quot;parserOptions.project&quot;...<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="é…ç½®-tsconfig-eslint-json"><a href="#é…ç½®-tsconfig-eslint-json" class="header-anchor">#</a> é…ç½® tsconfig.eslint.json</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">/* tsconfig.eslint.json */</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;**/*.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;**/*.js&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="é…ç½®-eslintrc-js"><a href="#é…ç½®-eslintrc-js" class="header-anchor">#</a> é…ç½® .eslintrc.js</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .eslintrc.js</span>
<span class="token keyword">const</span> eslintrc <span class="token operator">=</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span> <span class="token comment">// ä½¿ç”¨ ts è§£æå™¨</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span> <span class="token comment">// eslint æ¨èè§„åˆ™</span>
        <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span> <span class="token comment">// ts æ¨èè§„åˆ™</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'@typescript-eslint'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    env<span class="token operator">:</span> <span class="token punctuation">{</span>
        browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        node<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        es6<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        project<span class="token operator">:</span> <span class="token string">'./tsconfig.eslint.json'</span><span class="token punctuation">,</span>
        ecmaVersion<span class="token operator">:</span> <span class="token number">2019</span><span class="token punctuation">,</span>
        sourceType<span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
        ecmaFeatures<span class="token operator">:</span> <span class="token punctuation">{</span>
          experimentalObjectRestSpread<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// è‡ªå®šä¹‰</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> eslintrc
</code></pre></div><h3 id="å‚è€ƒ-commit-2"><a href="#å‚è€ƒ-commit-2" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/36f63d7ae4140ed32388b5111d0f537909e7c81d" target="_blank" rel="noopener noreferrer">36f63d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="é…ç½®-rollup"><a href="#é…ç½®-rollup" class="header-anchor">#</a> é…ç½® rollup</h2> <p>vueã€react ç­‰è®¸å¤šæµè¡Œåº“éƒ½åœ¨ä½¿ç”¨ Rollup.js ï¼Œå°±ä¸å¤šä»‹ç»ï¼Œç›´æ¥çœ‹ <a href="https://www.rollupjs.com/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å§ğŸ¤¯</p> <h3 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="header-anchor">#</a> å®‰è£…</h3> <p>å®‰è£… rollup ä»¥åŠè¦ç”¨åˆ°çš„æ’ä»¶</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D rollup rollup-plugin-babel rollup-plugin-commonjs rollup-plugin-eslint rollup-plugin-node-resolve rollup-plugin-typescript2
</code></pre></div><p>å®‰è£… babel ç›¸å…³çš„åº“</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D @babel/preset-env
</code></pre></div><h3 id="ç›®å½•ç»“æ„-2"><a href="#ç›®å½•ç»“æ„-2" class="header-anchor">#</a> ç›®å½•ç»“æ„</h3> <div class="language- extra-class"><pre class="language-text"><code>fly-helper
 |
 |- typings
 	 |- index.d.ts
 |- .babelrc
 |- rollup.config.ts
</code></pre></div><h3 id="é…ç½®-babelrc"><a href="#é…ç½®-babelrc" class="header-anchor">#</a> é…ç½® .babelrc</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">/* .babelrc */</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">/* Babel ä¼šåœ¨ Rollup æœ‰æœºä¼šåšå¤„ç†ä¹‹å‰ï¼Œå°†æˆ‘ä»¬çš„æ¨¡å—è½¬æˆ CommonJSï¼Œå¯¼è‡´ Rollup çš„ä¸€äº›å¤„ç†å¤±è´¥ */</span>
        <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="é…ç½®-rollup-config-ts"><a href="#é…ç½®-rollup-config-ts" class="header-anchor">#</a> é…ç½® rollup.config.ts</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RollupOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rollup'</span>
<span class="token keyword">import</span> rollupTypescript <span class="token keyword">from</span> <span class="token string">'rollup-plugin-typescript2'</span>
<span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">'rollup-plugin-babel'</span>
<span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">'rollup-plugin-node-resolve'</span>
<span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">'rollup-plugin-commonjs'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> eslint <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rollup-plugin-eslint'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">DEFAULT_EXTENSIONS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@babel/core'</span>

<span class="token keyword">import</span> pkg <span class="token keyword">from</span> <span class="token string">'./package.json'</span>

<span class="token keyword">const</span> paths <span class="token operator">=</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/index.ts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/lib'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// rollup é…ç½®é¡¹</span>
<span class="token keyword">const</span> rollupConfig<span class="token operator">:</span> RollupOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> paths<span class="token punctuation">.</span>input<span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// è¾“å‡º commonjs è§„èŒƒçš„ä»£ç </span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>output<span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'cjs'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> pkg<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// è¾“å‡º es è§„èŒƒçš„ä»£ç </span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>output<span class="token punctuation">,</span> <span class="token string">'index.esm.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'es'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> pkg<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// external: ['lodash'], // æŒ‡å‡ºåº”å°†å“ªäº›æ¨¡å—è§†ä¸ºå¤–éƒ¨æ¨¡å—ï¼Œå¦‚ Peer dependencies ä¸­çš„ä¾èµ–</span>
  <span class="token comment">// plugins éœ€è¦æ³¨æ„å¼•ç”¨é¡ºåº</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// éªŒè¯å¯¼å…¥çš„æ–‡ä»¶</span>
    <span class="token function">eslint</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      throwOnError<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// lint ç»“æœæœ‰é”™è¯¯å°†ä¼šæŠ›å‡ºå¼‚å¸¸</span>
      throwOnWarning<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/**/*.ts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules/**'</span><span class="token punctuation">,</span> <span class="token string">'lib/**'</span><span class="token punctuation">,</span> <span class="token string">'*.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// ä½¿å¾— rollup æ”¯æŒ commonjs è§„èŒƒï¼Œè¯†åˆ« commonjs è§„èŒƒçš„ä¾èµ–</span>
    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// é…åˆ commnjs è§£æç¬¬ä¸‰æ–¹æ¨¡å—</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// å°†è‡ªå®šä¹‰é€‰é¡¹ä¼ é€’ç»™è§£ææ’ä»¶</span>
      customResolveOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        moduleDirectory<span class="token operator">:</span> <span class="token string">'node_modules'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">rollupTypescript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      runtimeHelpers<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// åªè½¬æ¢æºä»£ç ï¼Œä¸è¿è¡Œå¤–éƒ¨ä¾èµ–</span>
      exclude<span class="token operator">:</span> <span class="token string">'node_modules/**'</span><span class="token punctuation">,</span>
      <span class="token comment">// babel é»˜è®¤ä¸æ”¯æŒ ts éœ€è¦æ‰‹åŠ¨æ·»åŠ </span>
      extensions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token operator">...</span><span class="token constant">DEFAULT_EXTENSIONS</span><span class="token punctuation">,</span>
        <span class="token string">'.ts'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> rollupConfig
</code></pre></div><p>ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p> <ul><li>plugins å¿…é¡»æœ‰é¡ºåºçš„ä½¿ç”¨</li> <li>external æ¥è®¾ç½®ä¸‰æ–¹åº“ä¸ºå¤–éƒ¨æ¨¡å—ï¼Œå¦åˆ™ä¹Ÿä¼šè¢«æ‰“åŒ…è¿›å»ï¼Œå˜å¾—éå¸¸å¤§å“¦</li></ul> <h3 id="é…ç½®å£°æ˜æ–‡ä»¶"><a href="#é…ç½®å£°æ˜æ–‡ä»¶" class="header-anchor">#</a> é…ç½®å£°æ˜æ–‡ä»¶</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'rollup-plugin-babel'</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'rollup-plugin-eslint'</span>
</code></pre></div><p>ç”±äºéƒ¨åˆ†æ’ä»¶è¿˜æ²¡æœ‰ @types åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ å£°æ˜æ–‡ä»¶</p> <h3 id="è¯•ä¸€ä¸‹"><a href="#è¯•ä¸€ä¸‹" class="header-anchor">#</a> è¯•ä¸€ä¸‹</h3> <p>æˆ‘ä»¬åœ¨ index.ts æ–‡ä»¶ä¸‹ï¼Œéšæ„åŠ å…¥ä¸€ä¸ªæ–¹æ³•</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">myFirstFunc</span> <span class="token punctuation">(</span>str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç”±äºä½¿ç”¨äº† <code>RollupOptions</code> æ¥å£ï¼Œç›´æ¥æ‰§è¡Œä¼šæŠ¥é”™ã€‚æˆ‘ä»¬è¦æ³¨é‡Šæ‰ç¬¬2è¡Œ<code>import { RollupOptions } from 'rollup'</code>ï¼Œå’Œç¬¬17è¡Œ <code>const rollupConfig</code> åé¢çš„ <code>: RollupOptions</code>ã€‚</p> <p>ç„¶åæ‰§è¡Œ <code>npx rollup --c rollup.config.ts</code></p> <p>å°±ç”Ÿæˆäº† index.js å’Œ index.esm.js æ–‡ä»¶ã€‚åˆ†åˆ«å¯¹åº”ç€ commonjs è§„èŒƒå’Œ es è§„èŒƒçš„æ–‡ä»¶ã€‚rollup å¯æ˜¯å¤§åŠ›æ¨è¡Œ es è§„èŒƒå•Šï¼Œç„¶åæˆ‘ä»¬å¾ˆå¤šä¸‰æ–¹åº“éƒ½ä»æ—§ä½¿ç”¨ commonjs è§„èŒƒï¼Œä¸ºäº†å…¼å®¹ï¼Œæˆ‘ä»¬ä¸¤ç§è§„èŒƒéƒ½ç”Ÿæˆã€‚</p> <p>ç”±äºä½¿ç”¨äº† ts ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å¿«é€Ÿè¡¥å…¨çš„éœ€æ±‚ï¼ŒæŒ‰ç…§ä¸Šé¢çš„ä¾‹å­ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªåŒ…åï¼Œvscode ä¸Šè¾“å…¥å°±ä¼šæœ‰å¦‚ä¸‹æ•ˆæœ</p> <p><img src="http://file.wangsijie.top/blog/20191226114541.png" alt=""></p> <h3 id="å‚è€ƒ-commit-3"><a href="#å‚è€ƒ-commit-3" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/0aab814f129de73ef12b1652c43e04139000a2db" target="_blank" rel="noopener noreferrer">0aab81<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="é…ç½®-jest"><a href="#é…ç½®-jest" class="header-anchor">#</a> é…ç½® jest</h2> <p>å·¥å…·åº“å½“ç„¶è¦å†™æµ‹è¯•å•¦ï¼Œå¿«å¼€å§‹å§</p> <h3 id="å®‰è£…-3"><a href="#å®‰è£…-3" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D @types/jest eslint-plugin-jest jest ts-jest
</code></pre></div><h3 id="ç›®å½•ç»“æ„-3"><a href="#ç›®å½•ç»“æ„-3" class="header-anchor">#</a> ç›®å½•ç»“æ„</h3> <div class="language- extra-class"><pre class="language-text"><code>fly-helper
 |- test
 	|- index.test.ts
 |- jest.config.js
</code></pre></div><h3 id="é…ç½®-jest-config-js"><a href="#é…ç½®-jest-config-js" class="header-anchor">#</a> é…ç½® jest.config.js</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// jest.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  preset<span class="token operator">:</span> <span class="token string">'ts-jest'</span><span class="token punctuation">,</span>
  testEnvironment<span class="token operator">:</span> <span class="token string">'node'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åŠ¨æ‰‹å†™ä¸ª-test-å§"><a href="#åŠ¨æ‰‹å†™ä¸ª-test-å§" class="header-anchor">#</a> åŠ¨æ‰‹å†™ä¸ª test å§</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// index.test.ts</span>

<span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span>
<span class="token keyword">import</span> myFirstFunc <span class="token keyword">from</span> <span class="token string">'../src'</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'validate:'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * myFirstFunc
   */</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'myFirstFunc'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">' return hello rollup '</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      assert<span class="token punctuation">.</span><span class="token function">strictEqual</span><span class="token punctuation">(</span><span class="token function">myFirstFunc</span><span class="token punctuation">(</span><span class="token string">'rollup'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'hello rollup'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="å†é…ç½®-eslint"><a href="#å†é…ç½®-eslint" class="header-anchor">#</a> å†é…ç½® eslint</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> eslintrc <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token string">'plugin:jest/recommended'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token string">'jest'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å¢åŠ -package-json-scripts"><a href="#å¢åŠ -package-json-scripts" class="header-anchor">#</a> å¢åŠ  package.json scripts</h3> <div class="language- extra-class"><pre class="language-text"><code>&quot;test&quot;: &quot;jest --coverage --verbose -u&quot;
</code></pre></div><ul><li>coverage  è¾“å‡ºæµ‹è¯•è¦†ç›–ç‡</li> <li>verbose å±‚æ¬¡æ˜¾ç¤ºæµ‹è¯•å¥—ä»¶ä¸­æ¯ä¸ªæµ‹è¯•çš„ç»“æœï¼Œä¼šçœ‹ç€æ›´åŠ ç›´è§‚å•¦</li></ul> <h3 id="è¯•ä¸€ä¸‹-2"><a href="#è¯•ä¸€ä¸‹-2" class="header-anchor">#</a> è¯•ä¸€ä¸‹</h3> <div class="language- extra-class"><pre class="language-text"><code>yarn test
</code></pre></div><p>æ˜¯ä¸æ˜¯æˆåŠŸäº†å‘¢ğŸ˜Œ</p> <p><img src="http://file.wangsijie.top/blog/20191226154137.png" alt=""></p> <h3 id="å‚è€ƒ-commit-4"><a href="#å‚è€ƒ-commit-4" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/9bbe5b1585ab709b8e0c1ad0ff8243b7c43b7bd7" target="_blank" rel="noopener noreferrer">9bbe5b<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="é…ç½®-microsoft-api-extractor"><a href="#é…ç½®-microsoft-api-extractor" class="header-anchor">#</a> é…ç½® @microsoft/api-extractor</h2> <p>å½“æˆ‘ä»¬ src ä¸‹æœ‰å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œæ‰“åŒ…åä¼šç”Ÿæˆå¤šä¸ªå£°æ˜æ–‡ä»¶ã€‚</p> <p>ä½¿ç”¨ @microsoft/api-extractor è¿™ä¸ªåº“æ˜¯ä¸ºäº†æŠŠæ‰€æœ‰çš„ .d.ts åˆæˆä¸€ä¸ªï¼Œå¹¶ä¸”ï¼Œè¿˜æ˜¯å¯ä»¥æ ¹æ®å†™çš„æ³¨é‡Šè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ã€‚</p> <h3 id="å®‰è£…-4"><a href="#å®‰è£…-4" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D @microsoft/api-extractor
</code></pre></div><h3 id="é…ç½®-api-extractor-json"><a href="#é…ç½®-api-extractor-json" class="header-anchor">#</a> é…ç½® api-extractor.json</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">/* api-extractor.json */</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://developer.microsoft.com/json-schemas/api-extractor/v7/api-extractor.schema.json&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mainEntryPointFilePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib/index.d.ts&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bundledPackages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dtsRollup&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;untrimmedFilePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib/index.d.ts&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å¢åŠ -package-json-scripts-2"><a href="#å¢åŠ -package-json-scripts-2" class="header-anchor">#</a> å¢åŠ  package.json scripts</h3> <div class="language- extra-class"><pre class="language-text"><code>&quot;api&quot;: &quot;api-extractor run&quot;,
</code></pre></div><h3 id="å°è¯•ä¸€ä¸‹"><a href="#å°è¯•ä¸€ä¸‹" class="header-anchor">#</a> å°è¯•ä¸€ä¸‹</h3> <p>ä½ å¯ä»¥å°è¯•å¤šå†™å‡ ä¸ªæ–¹æ³•ï¼Œæ‰“åŒ…åä¼šå‘ç°æœ‰å¤šä¸ª .d.ts æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ <code>yarn api</code></p> <p>åŠ å…¥<a href="https://github.com/microsoft/tsdoc" target="_blank" rel="noopener noreferrer">ts doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> é£æ ¼æ³¨é‡Š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * è¿”å› hello å¼€å¤´çš„å­—ç¬¦ä¸²
 * @param str - input string
 * @returns 'hello xxx'
 * @example
 * ```ts
 * myFirstFunc('ts') =&gt; 'hello ts'
 * ```
 *
 * @beta
 * @author ziming
 */</span>
</code></pre></div><p>åœ¨ä½¿ç”¨çš„è¯¥æ–¹æ³•çš„æ—¶å€™å°±ä¼šæœ‰æç¤ºå•¦</p> <p>è¿™é‡Œæˆ‘å·²ç»å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œè¯·çœ‹ ä¸‹é¢çš„ commit</p> <p>æ‰§è¡Œåï¼Œä¼šå‘ç° å£°æ˜éƒ½åˆåœ¨ index.d.ts ä¸Šå•¦ã€‚ç„¶åè¦æŠŠå¤šä½™çš„ç»™åˆ é™¤æ‰ï¼Œåé¢æ”¹æˆè‡ªåŠ¨åˆ é™¤å®ƒğŸ˜•</p> <p>ğŸ˜¤è¿˜æœ‰ä¸€ä¸ª temp æ–‡ä»¶å¤¹ï¼Œå’±ä»¬é…ç½®ä¸€ä¸‹ gitignore ä¸ç„¶å®ƒæäº¤ã€‚tsdoc-metadata.json å¯ä»¥æš‚æ—¶ä¸ç®¡å®ƒï¼Œå¯ä»¥åˆ é™¤æ‰ã€‚</p> <p>åé¢é…ç½® package.json çš„ typing ä¼šè‡ªåŠ¨æ›´æ”¹å­˜æ”¾ä½ç½®</p> <h3 id="å‚è€ƒ-commit-5"><a href="#å‚è€ƒ-commit-5" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/4e4b3df2febf9f32f17e4bb06c3d734508e10b2c" target="_blank" rel="noopener noreferrer">4e4b3d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä¹‹åä½¿ç”¨æ–¹æ³•å°±æœ‰è¿™æ ·çš„æç¤ºï¼Œæ˜¯ä¸æ˜¯ä¼šç”¨çš„å¾ˆæ–¹ä¾¿å˜ğŸ˜‰</p> <p><img src="http://file.wangsijie.top/blog/20191226164824.png" alt=""></p> <h2 id="gulp-è‡ªåŠ¨åŒ–æ„å»º"><a href="#gulp-è‡ªåŠ¨åŒ–æ„å»º" class="header-anchor">#</a> gulp è‡ªåŠ¨åŒ–æ„å»º</h2> <h3 id="å®‰è£…-5"><a href="#å®‰è£…-5" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D gulp @types/gulp fs-extra @types/fs-extra @types/node ts-node chalk
</code></pre></div><h3 id="é…ç½®-package-json"><a href="#é…ç½®-package-json" class="header-anchor">#</a> é…ç½® package.json</h3> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.esm.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;typings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.d.js&quot;</span><span class="token punctuation">,</span>

  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">/* ... */</span>
      <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gulp build&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="é…ç½®-gulpfile"><a href="#é…ç½®-gulpfile" class="header-anchor">#</a> é…ç½® gulpfile</h3> <p>æˆ‘ä»¬æ€è€ƒä¸€ä¸‹æ„å»ºæµç¨‹ğŸ¤”</p> <ol><li>åˆ é™¤ lib æ–‡ä»¶</li> <li>å‘¼å« Rollup æ‰“åŒ…</li> <li>api-extractor ç”Ÿæˆç»Ÿä¸€çš„å£°æ˜æ–‡ä»¶ï¼Œç„¶å åˆ é™¤å¤šä½™çš„å£°æ˜æ–‡ä»¶</li> <li>å®Œæˆ</li></ol> <p>æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// åˆ é™¤ lib æ–‡ä»¶</span>
<span class="token keyword">const</span> clearLibFile<span class="token operator">:</span> <span class="token function-variable function">TaskFunc</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  fse<span class="token punctuation">.</span><span class="token function">removeSync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>lib<span class="token punctuation">)</span>
  log<span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span><span class="token string">'Deleted lib file'</span><span class="token punctuation">)</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// rollup æ‰“åŒ…</span>
<span class="token keyword">const</span> buildByRollup<span class="token operator">:</span> <span class="token function-variable function">TaskFunc</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    input<span class="token operator">:</span> rollupConfig<span class="token punctuation">.</span>input<span class="token punctuation">,</span>
    external<span class="token operator">:</span> rollupConfig<span class="token punctuation">.</span>external<span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> rollupConfig<span class="token punctuation">.</span>plugins<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> outOptions <span class="token operator">=</span> rollupConfig<span class="token punctuation">.</span>output
  <span class="token keyword">const</span> bundle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">rollup</span><span class="token punctuation">(</span>inputOptions<span class="token punctuation">)</span>

  <span class="token comment">// å†™å…¥éœ€è¦éå†è¾“å‡ºé…ç½®</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>outOptions<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outOptions<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>outOption<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> bundle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>outOption<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    log<span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span><span class="token string">'Rollup built successfully'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// api-extractor æ•´ç† .d.ts æ–‡ä»¶</span>
<span class="token keyword">const</span> apiExtractorGenerate<span class="token operator">:</span> <span class="token function-variable function">TaskFunc</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> apiExtractorJsonPath<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./api-extractor.json'</span><span class="token punctuation">)</span>
  <span class="token comment">// åŠ è½½å¹¶è§£æ api-extractor.json æ–‡ä»¶</span>
  <span class="token keyword">const</span> extractorConfig<span class="token operator">:</span> ExtractorConfig <span class="token operator">=</span> <span class="token keyword">await</span> ExtractorConfig<span class="token punctuation">.</span><span class="token function">loadFileAndPrepare</span><span class="token punctuation">(</span>apiExtractorJsonPath<span class="token punctuation">)</span>
  <span class="token comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨ index.d.ts æ–‡ä»¶ï¼Œè¿™é‡Œå¿…é¡»å¼‚æ­¥å…ˆè®¿é—®ä¸€è¾¹ï¼Œä¸ç„¶åé¢æ‰¾ä¸åˆ°ä¼šæŠ¥é”™</span>
  <span class="token keyword">const</span> isExist<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token keyword">await</span> fse<span class="token punctuation">.</span><span class="token function">pathExists</span><span class="token punctuation">(</span>extractorConfig<span class="token punctuation">.</span>mainEntryPointFilePath<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isExist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'API Extractor not find index.d.ts'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è°ƒç”¨ API</span>
  <span class="token keyword">const</span> extractorResult<span class="token operator">:</span> ExtractorResult <span class="token operator">=</span> <span class="token keyword">await</span> Extractor<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>extractorConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    localBuild<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// åœ¨è¾“å‡ºä¸­æ˜¾ç¤ºä¿¡æ¯</span>
    showVerboseMessages<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>extractorResult<span class="token punctuation">.</span>succeeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ é™¤å¤šä½™çš„ .d.ts æ–‡ä»¶</span>
    <span class="token keyword">const</span> libFiles<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> fse<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>lib<span class="token punctuation">)</span>
    libFiles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> file <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.d.ts'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> fse<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>lib<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    log<span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span><span class="token string">'API Extractor completed successfully'</span><span class="token punctuation">)</span>
    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">API Extractor completed with </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>extractorResult<span class="token punctuation">.</span>errorCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> errors</span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> and </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>extractorResult<span class="token punctuation">.</span>warningCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> warnings</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// å®Œæˆ</span>
<span class="token keyword">const</span> complete<span class="token operator">:</span> <span class="token function-variable function">TaskFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span><span class="token string">'---- end ----'</span><span class="token punctuation">)</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åç”¨ä¸€ä¸ª build æ–¹æ³•ï¼Œå°†ä»–ä»¬æŒ‰é¡ºåºåˆèµ·æ¥</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>clearLibFile<span class="token punctuation">,</span> buildByRollup<span class="token punctuation">,</span> apiExtractorGenerate<span class="token punctuation">,</span> complete<span class="token punctuation">)</span>
</code></pre></div><h3 id="å°è¯•ä¸€ä¸‹-2"><a href="#å°è¯•ä¸€ä¸‹-2" class="header-anchor">#</a> å°è¯•ä¸€ä¸‹</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> build
</code></pre></div><p>æºœå» lib æ–‡ä»¶ä¸‹ç…ç…ğŸ§ï¼Œç¾æ»‹æ»‹ã€‚</p> <h3 id="å‚è€ƒ-commit-6"><a href="#å‚è€ƒ-commit-6" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/a5370cb0c1e334d271439916648bc98586b16f05" target="_blank" rel="noopener noreferrer">a5370c<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="changelog-è‡ªåŠ¨ç”Ÿæˆ"><a href="#changelog-è‡ªåŠ¨ç”Ÿæˆ" class="header-anchor">#</a> changelog è‡ªåŠ¨ç”Ÿæˆ</h2> <h3 id="å®‰è£…-6"><a href="#å®‰è£…-6" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D conventional-changelog-cli
</code></pre></div><h3 id="é…ç½®-gulpfile-2"><a href="#é…ç½®-gulpfile-2" class="header-anchor">#</a> é…ç½® gulpfile</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// gulpfile</span>
<span class="token keyword">import</span> conventionalChangelog <span class="token keyword">from</span> <span class="token string">'conventional-changelog'</span>

<span class="token comment">// è‡ªå®šä¹‰ç”Ÿæˆ changelog</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> changelog<span class="token operator">:</span> <span class="token function-variable function">TaskFunc</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> changelogPath<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>root<span class="token punctuation">,</span> <span class="token string">'CHANGELOG.md'</span><span class="token punctuation">)</span>
  <span class="token comment">// å¯¹å‘½ä»¤ conventional-changelog -p angular -i CHANGELOG.md -w -r 0</span>
  <span class="token keyword">const</span> changelogPipe <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">conventionalChangelog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    preset<span class="token operator">:</span> <span class="token string">'angular'</span><span class="token punctuation">,</span>
    releaseCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  changelogPipe<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> resultArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'# å·¥å…·åº“æ›´æ–°æ—¥å¿—\n\n'</span><span class="token punctuation">]</span>
  changelogPipe<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// åŸæ¥çš„ commits è·¯å¾„æ˜¯è¿›å…¥æäº¤åˆ—è¡¨</span>
    chunk <span class="token operator">=</span> chunk<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\/commits\//g</span><span class="token punctuation">,</span> <span class="token string">'/commit/'</span><span class="token punctuation">)</span>
    resultArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  changelogPipe<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> fse<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>changelogPath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>resultArray<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>æƒŠå–œçš„å‘ç° conventional-changelog æœ¨å¾— @types åº“ï¼Œç»§ç»­æ‰‹åŠ¨æ·»åŠ </p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// typings/index.d.ts</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'conventional-changelog'</span>
</code></pre></div><h3 id="å‚è€ƒ-commit-7"><a href="#å‚è€ƒ-commit-7" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/1f31ab05ad81e5f726a4b3ee7b73a0c6bf3e8566" target="_blank" rel="noopener noreferrer">1f31ab<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="ps-2"><a href="#ps-2" class="header-anchor">#</a> Ps</h3> <p>ä½¿ç”¨ conventional-changelog éœ€è¦æ³¨æ„ä¸€ä¸‹</p> <ul><li>éå¸¸æ³¨æ„ commit æ ¼å¼ï¼Œæ ¼å¼é‡‡ç”¨ <a href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">angular commit è§„èŒƒ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œä¼šè¯†åˆ« feat å’Œ fix å¼€å¤´çš„ commit ï¼Œç„¶åè‡ªåŠ¨ç”Ÿæˆ</li> <li>æ¯æ¬¡æ›´æ”¹éœ€è¦å…ˆå‡çº§ version å†å»ç”Ÿæˆã€‚åé¢ä¼šæœ‰ä¾‹å­</li></ul> <h2 id="ä¼˜åŒ–å¼€å‘æµç¨‹"><a href="#ä¼˜åŒ–å¼€å‘æµç¨‹" class="header-anchor">#</a> ä¼˜åŒ–å¼€å‘æµç¨‹</h2> <h3 id="å®‰è£…-7"><a href="#å®‰è£…-7" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> -D husky lint-staged
</code></pre></div><h3 id="package-json"><a href="#package-json" class="header-anchor">#</a> package.json</h3> <p>è¯ä¸å¤šè¯´ï¼Œçœ‹ä»£ç </p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged &amp; jest -u&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{.ts,.js}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;eslint&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;git add&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>ä¹‹åæäº¤ä»£ç éƒ½ä¼šå…ˆ lint éªŒè¯ï¼Œå† jest æµ‹è¯•é€šè¿‡ï¼Œæ‰å¯ä»¥æäº¤ã€‚è§„èŒƒå›¢é˜Ÿåä½œçš„ä»£ç è§„èŒƒ</p> <h2 id="ä¼˜åŒ–å‘å¸ƒæµç¨‹"><a href="#ä¼˜åŒ–å‘å¸ƒæµç¨‹" class="header-anchor">#</a> ä¼˜åŒ–å‘å¸ƒæµç¨‹</h2> <h3 id="package-json-2"><a href="#package-json-2" class="header-anchor">#</a> package.json</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">/* pushlish çš„æ–‡ä»¶ */</span>
<span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;lib&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LICENSE&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHANGELOG.md&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;README.md&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">/* ä½¿å¾—æ”¯æŒ tree shaking */</span>
<span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
    <span class="token property">&quot;changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gulp changelog&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prepublishOnly&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn lint &amp; yarn test &amp; yarn changelog &amp; yarn build&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>prepublishOnly å¯ä»¥åœ¨ publish çš„æ—¶å€™ï¼Œå…ˆ lint éªŒè¯ï¼Œ å† jest æµ‹è¯• ï¼Œ å†ç”Ÿæˆ changlog ï¼Œæœ€åæ‰“åŒ…ï¼Œæœ€åå‘å¸ƒã€‚</p> <p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†å…¨éƒ¨éœ€æ±‚ã€‚ğŸ¥³</p> <h3 id="å‚è€ƒ-commit-8"><a href="#å‚è€ƒ-commit-8" class="header-anchor">#</a> å‚è€ƒ commit</h3> <p><a href="https://github.com/simonwong/fly-helper/commit/7f343fda98ce31bf055184ac60932def8cf81367" target="_blank" rel="noopener noreferrer">7f343f<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="changelog-ä¾‹å­"><a href="#changelog-ä¾‹å­" class="header-anchor">#</a> changelog ä¾‹å­</h2> <ul><li><p>æˆ‘ä»¬å‡è£…ç°åœ¨å¼€å§‹å†™ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚æˆ‘åˆ é™¤äº†ä¸Šé¢çš„ä¾‹å­ï¼Œå¢åŠ äº†ä¸€ä¸ª calculate.ts</p> <p>è¯·çœ‹<a href="https://github.com/simonwong/fly-helper/tree/release/1.0.0" target="_blank" rel="noopener noreferrer">ä»“åº“åœ°å€ release/1.0.0 åˆ†æ”¯<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>ç„¶åæˆ‘ä»¬æäº¤è¿™æ¬¡æ›´æ”¹ï¼Œcommit å†…å®¹ä¸º <code>feat: æ–°å¢ calculateOneAddOne è®¡ç®— 1 + 1 æ–¹æ³•</code></p></li> <li><p>æ‰§è¡Œ npm version major å‡çº§ä¸»ç‰ˆæœ¬å· 1.0.0ã€‚</p> <p><a href="https://simonwong.github.io/advanced/npm.html#version" target="_blank" rel="noopener noreferrer">æ›´å¤šå‡çº§ç‰ˆæœ¬çš„æ“ä½œ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ç‰ˆæœ¬è§„èŒƒå‚è€ƒ <a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener noreferrer">è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><code>yarn changelog</code> çœ‹çœ‹ä½ çš„ changelog.md å°±è‡ªåŠ¨ç”Ÿæˆäº†ğŸ¥³</p></li></ul> <p><img src="http://file.wangsijie.top/blog/20191227100915.png" alt=""></p> <h3 id="ä»“åº“åœ°å€"><a href="#ä»“åº“åœ°å€" class="header-anchor">#</a> ä»“åº“åœ°å€</h3> <p><a href="https://github.com/simonwong/fly-helper/tree/release/1.0.0" target="_blank" rel="noopener noreferrer">fly-helper/release/1.0.0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="header-anchor">#</a> å‚è€ƒ</h2> <p><a href="https://ts.xcatliu.com/" target="_blank" rel="noopener noreferrer">TypeScript å…¥é—¨æ•™ç¨‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://microsoft.github.io/TypeSearch/" target="_blank" rel="noopener noreferrer">TypeSearch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://eslint.org/blog/2019/01/future-typescript-eslint" target="_blank" rel="noopener noreferrer">The future of TypeScript on ESLint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.rollupjs.com/" target="_blank" rel="noopener noreferrer">Rollup.js ä¸­æ–‡ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/rollup/rollup/wiki/pkg.module" target="_blank" rel="noopener noreferrer">rollup - pkg.module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>If you're writing a package, strongly consider using <code>pkg.module</code></p></blockquote> <p><a href="https://jestjs.io/docs/zh-Hans/getting-started" target="_blank" rel="noopener noreferrer">jest ä¸­æ–‡æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://api-extractor.com/" target="_blank" rel="noopener noreferrer">api-extractor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/microsoft/tsdoc" target="_blank" rel="noopener noreferrer">tsdoc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.gulpjs.com.cn/docs/getting-started/quick-start/" target="_blank" rel="noopener noreferrer">gulp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener noreferrer">Commit message å’Œ Change log ç¼–å†™æŒ‡å—<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6 months ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/advanced/TypeScript.html" class="prev">
        TypeScript
      </a></span> <span class="next"><a href="/advanced/ä» webpack æ‰“åŒ…çœ‹å‰ç«¯æ¨¡å—åŒ–.html">
        ä» webpack æ‰“åŒ…çœ‹å‰ç«¯æ¨¡å—åŒ–
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2e783a63.js" defer></script><script src="/assets/js/2.728175a7.js" defer></script><script src="/assets/js/10.530c7dd2.js" defer></script>
  </body>
</html>
